/*! For license information please see 849.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[849],{1849:(r,a,n)=>{n.r(a),n.d(a,{default:()=>h});function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(r)}function t(){var r,a,n="function"==typeof Symbol?Symbol:{},e=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function o(n,e,t,s){var o=e&&e.prototype instanceof c?e:c,l=Object.create(o.prototype);return i(l,"_invoke",function(n,e,t){var i,s,o,c=0,l=t||[],m=!1,u={p:0,n:0,v:r,a:p,f:p.bind(r,4),d:function(a,n){return i=a,s=0,o=r,u.n=n,d}};function p(n,e){for(s=n,o=e,a=0;!m&&c&&!t&&a<l.length;a++){var t,i=l[a],p=u.p,v=i[2];n>3?(t=v===e)&&(o=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=r):i[0]<=p&&((t=n<2&&p<i[1])?(s=0,u.v=e,u.n=i[1]):p<v&&(t=n<3||i[0]>e||e>v)&&(i[4]=n,i[5]=e,u.n=v,s=0))}if(t||n>1)return d;throw m=!0,e}return function(t,l,v){if(c>1)throw TypeError("Generator is already running");for(m&&1===l&&p(l,v),s=l,o=v;(a=s<2?r:o)||!m;){i||(s?s<3?(s>1&&(u.n=-1),p(s,o)):u.n=o:u.v=o);try{if(c=2,i){if(s||(t="next"),a=i[t]){if(!(a=a.call(i,o)))throw TypeError("iterator result is not an object");if(!a.done)return a;o=a.value,s<2&&(s=0)}else 1===s&&(a=i.return)&&a.call(i),s<2&&(o=TypeError("The iterator does not provide a '"+t+"' method"),s=1);i=r}else if((a=(m=u.n<0)?o:n.call(e,u))!==d)break}catch(a){i=r,s=1,o=a}finally{c=1}}return{value:a,done:m}}}(n,t,s),!0),l}var d={};function c(){}function l(){}function m(){}a=Object.getPrototypeOf;var u=[][e]?a(a([][e]())):(i(a={},e,function(){return this}),a),p=m.prototype=c.prototype=Object.create(u);function v(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,m):(r.__proto__=m,i(r,s,"GeneratorFunction")),r.prototype=Object.create(p),r}return l.prototype=m,i(p,"constructor",m),i(m,"constructor",l),l.displayName="GeneratorFunction",i(m,s,"GeneratorFunction"),i(p),i(p,s,"Generator"),i(p,e,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:o,m:v}})()}function i(r,a,n,e){var t=Object.defineProperty;try{t({},"",{})}catch(r){t=0}i=function(r,a,n,e){if(a)t?t(r,a,{value:n,enumerable:!e,configurable:!e,writable:!e}):r[a]=n;else{var s=function(a,n){i(r,a,function(r){return this._invoke(a,n,r)})};s("next",0),s("throw",1),s("return",2)}},i(r,a,n,e)}function s(r,a,n,e,t,i,s){try{var o=r[i](s),d=o.value}catch(r){return void n(r)}o.done?a(d):Promise.resolve(d).then(e,t)}function o(r){return function(){var a=this,n=arguments;return new Promise(function(e,t){var i=r.apply(a,n);function o(r){s(i,e,t,o,d,"next",r)}function d(r){s(i,e,t,o,d,"throw",r)}o(void 0)})}}var d,c,l;const m=(d={name:"MatchdayForm",data:function(){return{loading:!1,submitting:!1,championships:[],clubs:[],form:{championship_id:"",number:"",name:"",description:"",date:"",start_time:"",end_time:"",venue:"",address:"",organizer_club_id:"",organizer_name:"",organizer_contact:"",organizer_phone:"",entry_fee:0,public_registration_enabled:!1,status:"draft"},errors:{}}},computed:{matchdayId:function(){return this.$route.params.id},isEditing:function(){return!!this.matchdayId},fromChampionship:function(){return"championship"===this.$route.query.from&&this.$route.query.championshipId},fromChampionshipId:function(){return this.$route.query.championshipId}},mounted:function(){var r=this;return o(t().m(function a(){return t().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,r.loadFormData();case 1:if(!r.isEditing){a.n=3;break}return a.n=2,r.loadMatchday();case 2:a.n=4;break;case 3:r.fromChampionship&&(r.form.championship_id=r.fromChampionshipId);case 4:return a.a(2)}},a)}))()},methods:{loadFormData:function(){var r=this;return o(t().m(function a(){var n,e,i,s,o;return t().w(function(a){for(;;)switch(a.n){case 0:return r.loading=!0,a.p=1,a.n=2,fetch("/api/championships");case 2:if(!(n=a.v).ok){a.n=4;break}return a.n=3,n.json();case 3:e=a.v,r.championships=e.data||e;case 4:return a.n=5,fetch("/api/clubs");case 5:if(!(i=a.v).ok){a.n=7;break}return a.n=6,i.json();case 6:s=a.v,r.clubs=s.data||s;case 7:a.n=9;break;case 8:a.p=8,o=a.v,console.error("Error loading form data:",o);case 9:return a.p=9,r.loading=!1,a.f(9);case 10:return a.a(2)}},a,null,[[1,8,9,10]])}))()},loadMatchday:function(){var r=this;return o(t().m(function a(){var n,e,i,s;return t().w(function(a){for(;;)switch(a.n){case 0:if(r.matchdayId){a.n=1;break}return a.a(2);case 1:return r.loading=!0,a.p=2,a.n=3,fetch("/api/matchdays/".concat(r.matchdayId));case 3:if((n=a.v).ok){a.n=4;break}throw new Error("Jornada no encontrada");case 4:return a.n=5,n.json();case 5:e=a.v,i=e.success?e.data:e,r.form={championship_id:i.championship_id||"",number:i.number||"",name:i.name||"",description:i.description||"",date:i.date||"",start_time:i.start_time||"",end_time:i.end_time||"",venue:i.venue||"",address:i.address||"",organizer_club_id:i.organizer_club_id||"",organizer_name:i.organizer_name||"",organizer_contact:i.organizer_contact||"",organizer_phone:i.organizer_phone||"",entry_fee:i.entry_fee||0,public_registration_enabled:i.public_registration_enabled||!1,status:i.status||"draft"},a.n=7;break;case 6:a.p=6,s=a.v,console.error("Error loading matchday:",s),alert("Error al cargar los datos de la jornada"),r.$router.push({name:"matchdays"});case 7:return a.p=7,r.loading=!1,a.f(7);case 8:return a.a(2)}},a,null,[[2,6,7,8]])}))()},submitForm:function(){var r=this;return o(t().m(function a(){var n,e,i,s,o,d;return t().w(function(a){for(;;)switch(a.n){case 0:return r.submitting=!0,r.errors={},a.p=1,n=r.isEditing?"/api/matchdays/".concat(r.matchdayId):"/api/matchdays",e=r.isEditing?"PUT":"POST",a.n=2,fetch(n,{method:e,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(r.form)});case 2:return i=a.v,a.n=3,i.json();case 3:s=a.v,i.ok?(alert(r.isEditing?"Jornada actualizada exitosamente":"Jornada creada exitosamente"),o=r.isEditing?r.matchdayId:s.data.id,r.fromChampionship?r.$router.push({name:"matchdays.show",params:{id:o},query:{from:"championship",championshipId:r.fromChampionshipId}}):r.$router.push({name:"matchdays.show",params:{id:o}})):s.errors?r.errors=s.errors:alert("Error: "+(s.message||"No se pudo guardar la jornada")),a.n=5;break;case 4:a.p=4,d=a.v,console.error("Error submitting form:",d),alert("Error de conexión. Por favor, inténtalo de nuevo.");case 5:return a.p=5,r.submitting=!1,a.f(5);case 6:return a.a(2)}},a,null,[[1,4,5,6]])}))()},getBackUrl:function(){return this.isEditing?this.fromChampionship?{name:"matchdays.show",params:{id:this.matchdayId},query:{from:"championship",championshipId:this.fromChampionshipId}}:{name:"matchdays.show",params:{id:this.matchdayId}}:this.fromChampionship?{name:"championships.show",params:{id:this.fromChampionshipId}}:{name:"matchdays"}},getBackText:function(){return this.isEditing?"Ver Jornada":this.fromChampionship?"Campeonato":"Jornadas"}}},l=function(){var r=this;return o(t().m(function a(){var n,e,i,s;return t().w(function(a){for(;;)switch(a.n){case 0:if(!window.Laravel||!window.Laravel.initialData||"matchday-edit"!==window.Laravel.initialData.page){a.n=1;break}n=window.Laravel.initialData,e=n.matchday,i=n.championships,s=n.clubs,r.championships=i||[],r.clubs=s||[],e&&(r.form={championship_id:e.championship_id||"",number:e.number||"",name:e.name||"",description:e.description||"",date:e.date||"",start_time:e.start_time||"",end_time:e.end_time||"",venue:e.venue||"",address:e.address||"",organizer_club_id:e.organizer_club_id||"",organizer_name:e.organizer_name||"",organizer_contact:e.organizer_contact||"",organizer_phone:e.organizer_phone||"",entry_fee:e.entry_fee||0,public_registration_enabled:e.public_registration_enabled||!1,status:e.status||"draft"}),a.n=3;break;case 1:return a.n=2,r.loadFormData();case 2:if(!r.isEditing){a.n=3;break}return a.n=3,r.loadMatchday();case 3:r.fromChampionship&&!r.form.championship_id&&(r.form.championship_id=r.fromChampionshipId);case 4:return a.a(2)}},a)}))()},(c=function(r){var a=function(r,a){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var t=n.call(r,a||"default");if("object"!=e(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}(r,"string");return"symbol"==e(a)?a:a+""}(c="mounted"))in d?Object.defineProperty(d,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[c]=l,d);var u=n(5072),p=n.n(u),v=n(2429),f={insert:"head",singleton:!1};p()(v.A,f);v.A.locals;const h=(0,n(4486).A)(m,function(){var r=this,a=r._self._c;return a("div",{staticClass:"matchday-form"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"fas fa-calendar mr-2"}),r._v("\n                "+r._s(r.isEditing?"Editar Jornada":"Crear Nueva Jornada")+"\n            ")]),r._v(" "),a("div",{staticClass:"card-tools"},[a("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:r.getBackUrl()}},[a("i",{staticClass:"fas fa-arrow-left mr-1"}),r._v("\n                    "+r._s(r.getBackText())+"\n                ")])],1)]),r._v(" "),r.loading?a("div",{staticClass:"card-body text-center"},[r._m(0),r._v(" "),a("p",{staticClass:"mt-3"},[r._v(r._s(r.isEditing?"Cargando datos de la jornada...":"Preparando formulario..."))])]):a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(a){return a.preventDefault(),r.submitForm.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[r._v("Nombre de la Jornada")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":r.errors.name},attrs:{id:"name",type:"text",placeholder:"Ej: Jornada 1 - Clasificatoria"},domProps:{value:r.form.name},on:{input:function(a){a.target.composing||r.$set(r.form,"name",a.target.value)}}}),r._v(" "),a("small",{staticClass:"form-text text-muted"},[r._v("Si se deja vacío, se generará automáticamente")]),r._v(" "),r.errors.name?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                "+r._s(r.errors.name[0])+"\n                            ")]):r._e()]),r._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"championship_id"}},[r._v("Campeonato *")]),r._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:r.form.championship_id,expression:"form.championship_id"}],staticClass:"form-control",class:{"is-invalid":r.errors.championship_id},attrs:{id:"championship_id",required:""},on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,function(r){return r.selected}).map(function(r){return"_value"in r?r._value:r.value});r.$set(r.form,"championship_id",a.target.multiple?n:n[0])}}},[a("option",{attrs:{value:""}},[r._v("Seleccionar campeonato")]),r._v(" "),r._l(r.championships,function(n){return a("option",{key:n.id,domProps:{value:n.id}},[r._v("\n                                            "+r._s(n.name)+"\n                                        ")])})],2),r._v(" "),r.errors.championship_id?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.championship_id[0])+"\n                                    ")]):r._e()])]),r._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"number"}},[r._v("Número de Jornada")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:r.form.number,expression:"form.number",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":r.errors.number},attrs:{id:"number",type:"number",min:"1",placeholder:"Ej: 1"},domProps:{value:r.form.number},on:{input:function(a){a.target.composing||r.$set(r.form,"number",r._n(a.target.value))},blur:function(a){return r.$forceUpdate()}}}),r._v(" "),a("small",{staticClass:"form-text text-muted"},[r._v("Se asignará automáticamente si se deja vacío")]),r._v(" "),r.errors.number?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.number[0])+"\n                                    ")]):r._e()])])]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[r._v("Descripción")]),r._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:r.form.description,expression:"form.description"}],staticClass:"form-control",class:{"is-invalid":r.errors.description},attrs:{id:"description",rows:"3",placeholder:"Descripción opcional de la jornada..."},domProps:{value:r.form.description},on:{input:function(a){a.target.composing||r.$set(r.form,"description",a.target.value)}}}),r._v(" "),r.errors.description?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                "+r._s(r.errors.description[0])+"\n                            ")]):r._e()]),r._v(" "),a("div",{staticClass:"card mt-4"},[r._m(1),r._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"date"}},[r._v("Fecha de la Jornada")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.date,expression:"form.date"}],staticClass:"form-control",class:{"is-invalid":r.errors.date},attrs:{id:"date",type:"date"},domProps:{value:r.form.date},on:{input:function(a){a.target.composing||r.$set(r.form,"date",a.target.value)}}}),r._v(" "),r.errors.date?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                                "+r._s(r.errors.date[0])+"\n                                            ")]):r._e()])]),r._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"start_time"}},[r._v("Hora de Inicio")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.start_time,expression:"form.start_time"}],staticClass:"form-control",class:{"is-invalid":r.errors.start_time},attrs:{id:"start_time",type:"time"},domProps:{value:r.form.start_time},on:{input:function(a){a.target.composing||r.$set(r.form,"start_time",a.target.value)}}}),r._v(" "),r.errors.start_time?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                                "+r._s(r.errors.start_time[0])+"\n                                            ")]):r._e()])]),r._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"end_time"}},[r._v("Hora de Fin")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.end_time,expression:"form.end_time"}],staticClass:"form-control",class:{"is-invalid":r.errors.end_time},attrs:{id:"end_time",type:"time"},domProps:{value:r.form.end_time},on:{input:function(a){a.target.composing||r.$set(r.form,"end_time",a.target.value)}}}),r._v(" "),r.errors.end_time?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                                "+r._s(r.errors.end_time[0])+"\n                                            ")]):r._e()])])])])]),r._v(" "),a("div",{staticClass:"card mt-4"},[r._m(2),r._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"venue"}},[r._v("Lugar/Pista")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.venue,expression:"form.venue"}],staticClass:"form-control",class:{"is-invalid":r.errors.venue},attrs:{id:"venue",type:"text",placeholder:"Ej: Pista Nacional BMX"},domProps:{value:r.form.venue},on:{input:function(a){a.target.composing||r.$set(r.form,"venue",a.target.value)}}}),r._v(" "),r.errors.venue?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.venue[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[r._v("Dirección")]),r._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:r.form.address,expression:"form.address"}],staticClass:"form-control",class:{"is-invalid":r.errors.address},attrs:{id:"address",rows:"2",placeholder:"Dirección completa del lugar..."},domProps:{value:r.form.address},on:{input:function(a){a.target.composing||r.$set(r.form,"address",a.target.value)}}}),r._v(" "),r.errors.address?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.address[0])+"\n                                    ")]):r._e()])])])]),r._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"card"},[r._m(3),r._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"status"}},[r._v("Estado")]),r._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:r.form.status,expression:"form.status"}],staticClass:"form-control",class:{"is-invalid":r.errors.status},attrs:{id:"status"},on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,function(r){return r.selected}).map(function(r){return"_value"in r?r._value:r.value});r.$set(r.form,"status",a.target.multiple?n:n[0])}}},[a("option",{attrs:{value:"draft"}},[r._v("Borrador")]),r._v(" "),a("option",{attrs:{value:"active"}},[r._v("Activa")]),r._v(" "),a("option",{attrs:{value:"completed"}},[r._v("Completada")]),r._v(" "),a("option",{attrs:{value:"cancelled"}},[r._v("Cancelada")]),r._v(" "),a("option",{attrs:{value:"postponed"}},[r._v("Pospuesta")])]),r._v(" "),r.errors.status?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.status[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"entry_fee"}},[r._v("Costo de Inscripción")]),r._v(" "),a("div",{staticClass:"input-group"},[r._m(4),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:r.form.entry_fee,expression:"form.entry_fee",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":r.errors.entry_fee},attrs:{id:"entry_fee",type:"number",step:"0.01",min:"0",placeholder:"0.00"},domProps:{value:r.form.entry_fee},on:{input:function(a){a.target.composing||r.$set(r.form,"entry_fee",r._n(a.target.value))},blur:function(a){return r.$forceUpdate()}}})]),r._v(" "),r.errors.entry_fee?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.entry_fee[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.public_registration_enabled,expression:"form.public_registration_enabled"}],staticClass:"custom-control-input",attrs:{id:"public_registration_enabled",type:"checkbox"},domProps:{checked:Array.isArray(r.form.public_registration_enabled)?r._i(r.form.public_registration_enabled,null)>-1:r.form.public_registration_enabled},on:{change:function(a){var n=r.form.public_registration_enabled,e=a.target,t=!!e.checked;if(Array.isArray(n)){var i=r._i(n,null);e.checked?i<0&&r.$set(r.form,"public_registration_enabled",n.concat([null])):i>-1&&r.$set(r.form,"public_registration_enabled",n.slice(0,i).concat(n.slice(i+1)))}else r.$set(r.form,"public_registration_enabled",t)}}}),r._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"public_registration_enabled"}},[r._v("\n                                            Permitir inscripción pública\n                                        ")])]),r._v(" "),a("small",{staticClass:"form-text text-muted"},[r._v("Los pilotos pueden inscribirse por sí mismos")])])])]),r._v(" "),a("div",{staticClass:"card mt-3"},[r._m(5),r._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"organizer_club_id"}},[r._v("Club Organizador")]),r._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:r.form.organizer_club_id,expression:"form.organizer_club_id"}],staticClass:"form-control",class:{"is-invalid":r.errors.organizer_club_id},attrs:{id:"organizer_club_id"},on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,function(r){return r.selected}).map(function(r){return"_value"in r?r._value:r.value});r.$set(r.form,"organizer_club_id",a.target.multiple?n:n[0])}}},[a("option",{attrs:{value:""}},[r._v("Sin club organizador")]),r._v(" "),r._l(r.clubs,function(n){return a("option",{key:n.id,domProps:{value:n.id}},[r._v("\n                                            "+r._s(n.name)+"\n                                        ")])})],2),r._v(" "),r.errors.organizer_club_id?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.organizer_club_id[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"organizer_name"}},[r._v("Nombre del Organizador")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.organizer_name,expression:"form.organizer_name"}],staticClass:"form-control",class:{"is-invalid":r.errors.organizer_name},attrs:{id:"organizer_name",type:"text",placeholder:"Nombre completo"},domProps:{value:r.form.organizer_name},on:{input:function(a){a.target.composing||r.$set(r.form,"organizer_name",a.target.value)}}}),r._v(" "),r.errors.organizer_name?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.organizer_name[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"organizer_contact"}},[r._v("Email de Contacto")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.organizer_contact,expression:"form.organizer_contact"}],staticClass:"form-control",class:{"is-invalid":r.errors.organizer_contact},attrs:{id:"organizer_contact",type:"email",placeholder:"email@ejemplo.com"},domProps:{value:r.form.organizer_contact},on:{input:function(a){a.target.composing||r.$set(r.form,"organizer_contact",a.target.value)}}}),r._v(" "),r.errors.organizer_contact?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.organizer_contact[0])+"\n                                    ")]):r._e()]),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"organizer_phone"}},[r._v("Teléfono de Contacto")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.organizer_phone,expression:"form.organizer_phone"}],staticClass:"form-control",class:{"is-invalid":r.errors.organizer_phone},attrs:{id:"organizer_phone",type:"tel",placeholder:"+1 555-0123"},domProps:{value:r.form.organizer_phone},on:{input:function(a){a.target.composing||r.$set(r.form,"organizer_phone",a.target.value)}}}),r._v(" "),r.errors.organizer_phone?a("div",{staticClass:"invalid-feedback"},[r._v("\n                                        "+r._s(r.errors.organizer_phone[0])+"\n                                    ")]):r._e()])])])])]),r._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"d-flex justify-content-between"},[a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:r.getBackUrl()}},[a("i",{staticClass:"fas fa-times mr-1"}),r._v("\n                                Cancelar\n                            ")]),r._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:r.submitting}},[r.submitting?a("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):a("i",{staticClass:"fas fa-save mr-1"}),r._v("\n                                "+r._s(r.submitting?"Guardando...":r.isEditing?"Actualizar Jornada":"Crear Jornada")+"\n                            ")])],1)])])])])])])},[function(){var r=this._self._c;return r("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[r("span",{staticClass:"sr-only"},[this._v("Cargando...")])])},function(){var r=this._self._c;return r("div",{staticClass:"card-header"},[r("h5",{staticClass:"card-title mb-0"},[r("i",{staticClass:"fas fa-clock mr-2"}),this._v("\n                                    Fecha y Horarios\n                                ")])])},function(){var r=this._self._c;return r("div",{staticClass:"card-header"},[r("h5",{staticClass:"card-title mb-0"},[r("i",{staticClass:"fas fa-map-marker-alt mr-2"}),this._v("\n                                    Ubicación\n                                ")])])},function(){var r=this._self._c;return r("div",{staticClass:"card-header"},[r("h6",{staticClass:"card-title mb-0"},[r("i",{staticClass:"fas fa-cog mr-1"}),this._v("\n                                    Estado y Configuración\n                                ")])])},function(){var r=this._self._c;return r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[this._v("$")])])},function(){var r=this._self._c;return r("div",{staticClass:"card-header"},[r("h6",{staticClass:"card-title mb-0"},[r("i",{staticClass:"fas fa-users mr-1"}),this._v("\n                                    Organización\n                                ")])])}],!1,null,"75f81ad0",null).exports},2429:(r,a,n)=>{n.d(a,{A:()=>o});var e=n(4991),t=n.n(e),i=n(6314),s=n.n(i)()(t());s.push([r.id,".matchday-form[data-v-75f81ad0]{margin:0 auto;max-width:1200px}.card[data-v-75f81ad0]{box-shadow:0 0 1px rgba(0,0,0,.125),0 1px 3px rgba(0,0,0,.2)}.form-group label[data-v-75f81ad0]{color:#495057;font-weight:600}.card-header h5[data-v-75f81ad0],.card-header h6[data-v-75f81ad0]{color:#495057}@media (max-width:768px){.card-tools[data-v-75f81ad0]{align-items:stretch;flex-direction:column}.card-tools .btn[data-v-75f81ad0]{margin-bottom:.25rem}.d-flex.justify-content-between[data-v-75f81ad0]{flex-direction:column;gap:1rem}}","",{version:3,sources:["webpack://./resources/js/components/forms/MatchdayForm.vue"],names:[],mappings:"AAynBA,gCAEA,aAAA,CADA,gBAEA,CAEA,uBACA,4DACA,CAEA,mCAEA,aAAA,CADA,eAEA,CAEA,kEAEA,aACA,CAEA,yBACA,6BAEA,mBAAA,CADA,qBAEA,CAEA,kCACA,oBACA,CAEA,iDACA,qBAAA,CACA,QACA,CACA",sourcesContent:['<template>\r\n    <div class="matchday-form">\r\n        <div class="card">\r\n            <div class="card-header">\r\n                <h3 class="card-title">\r\n                    <i class="fas fa-calendar mr-2"></i>\r\n                    {{ isEditing ? \'Editar Jornada\' : \'Crear Nueva Jornada\' }}\r\n                </h3>\r\n                <div class="card-tools">\r\n                    <router-link :to="getBackUrl()" class="btn btn-outline-secondary btn-sm">\r\n                        <i class="fas fa-arrow-left mr-1"></i>\r\n                        {{ getBackText() }}\r\n                    </router-link>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if="loading" class="card-body text-center">\r\n                <div class="spinner-border text-primary" role="status">\r\n                    <span class="sr-only">Cargando...</span>\r\n                </div>\r\n                <p class="mt-3">{{ isEditing ? \'Cargando datos de la jornada...\' : \'Preparando formulario...\' }}</p>\r\n            </div>\r\n\r\n            <div v-else class="card-body">\r\n                <form @submit.prevent="submitForm">\r\n                    <div class="row">\r\n                        <div class="col-md-8">\r\n                            \x3c!-- Información básica --\x3e\r\n                            <div class="form-group">\r\n                                <label for="name">Nombre de la Jornada</label>\r\n                                <input \r\n                                    id="name"\r\n                                    v-model="form.name" \r\n                                    type="text" \r\n                                    class="form-control"\r\n                                    :class="{ \'is-invalid\': errors.name }"\r\n                                    placeholder="Ej: Jornada 1 - Clasificatoria"\r\n                                >\r\n                                <small class="form-text text-muted">Si se deja vacío, se generará automáticamente</small>\r\n                                <div v-if="errors.name" class="invalid-feedback">\r\n                                    {{ errors.name[0] }}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="row">\r\n                                <div class="col-md-6">\r\n                                    <div class="form-group">\r\n                                        <label for="championship_id">Campeonato *</label>\r\n                                        <select \r\n                                            id="championship_id"\r\n                                            v-model="form.championship_id" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.championship_id }"\r\n                                            required\r\n                                        >\r\n                                            <option value="">Seleccionar campeonato</option>\r\n                                            <option \r\n                                                v-for="championship in championships" \r\n                                                :key="championship.id" \r\n                                                :value="championship.id"\r\n                                            >\r\n                                                {{ championship.name }}\r\n                                            </option>\r\n                                        </select>\r\n                                        <div v-if="errors.championship_id" class="invalid-feedback">\r\n                                            {{ errors.championship_id[0] }}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-md-6">\r\n                                    <div class="form-group">\r\n                                        <label for="number">Número de Jornada</label>\r\n                                        <input \r\n                                            id="number"\r\n                                            v-model.number="form.number" \r\n                                            type="number" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.number }"\r\n                                            min="1"\r\n                                            placeholder="Ej: 1"\r\n                                        >\r\n                                        <small class="form-text text-muted">Se asignará automáticamente si se deja vacío</small>\r\n                                        <div v-if="errors.number" class="invalid-feedback">\r\n                                            {{ errors.number[0] }}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group">\r\n                                <label for="description">Descripción</label>\r\n                                <textarea \r\n                                    id="description"\r\n                                    v-model="form.description"\r\n                                    class="form-control"\r\n                                    rows="3"\r\n                                    :class="{ \'is-invalid\': errors.description }"\r\n                                    placeholder="Descripción opcional de la jornada..."\r\n                                ></textarea>\r\n                                <div v-if="errors.description" class="invalid-feedback">\r\n                                    {{ errors.description[0] }}\r\n                                </div>\r\n                            </div>\r\n\r\n                            \x3c!-- Fecha y horarios --\x3e\r\n                            <div class="card mt-4">\r\n                                <div class="card-header">\r\n                                    <h5 class="card-title mb-0">\r\n                                        <i class="fas fa-clock mr-2"></i>\r\n                                        Fecha y Horarios\r\n                                    </h5>\r\n                                </div>\r\n                                <div class="card-body">\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <div class="form-group">\r\n                                                <label for="date">Fecha de la Jornada</label>\r\n                                                <input \r\n                                                    id="date"\r\n                                                    v-model="form.date" \r\n                                                    type="date" \r\n                                                    class="form-control"\r\n                                                    :class="{ \'is-invalid\': errors.date }"\r\n                                                >\r\n                                                <div v-if="errors.date" class="invalid-feedback">\r\n                                                    {{ errors.date[0] }}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="col-md-3">\r\n                                            <div class="form-group">\r\n                                                <label for="start_time">Hora de Inicio</label>\r\n                                                <input \r\n                                                    id="start_time"\r\n                                                    v-model="form.start_time" \r\n                                                    type="time" \r\n                                                    class="form-control"\r\n                                                    :class="{ \'is-invalid\': errors.start_time }"\r\n                                                >\r\n                                                <div v-if="errors.start_time" class="invalid-feedback">\r\n                                                    {{ errors.start_time[0] }}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="col-md-3">\r\n                                            <div class="form-group">\r\n                                                <label for="end_time">Hora de Fin</label>\r\n                                                <input \r\n                                                    id="end_time"\r\n                                                    v-model="form.end_time" \r\n                                                    type="time" \r\n                                                    class="form-control"\r\n                                                    :class="{ \'is-invalid\': errors.end_time }"\r\n                                                >\r\n                                                <div v-if="errors.end_time" class="invalid-feedback">\r\n                                                    {{ errors.end_time[0] }}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            \x3c!-- Ubicación --\x3e\r\n                            <div class="card mt-4">\r\n                                <div class="card-header">\r\n                                    <h5 class="card-title mb-0">\r\n                                        <i class="fas fa-map-marker-alt mr-2"></i>\r\n                                        Ubicación\r\n                                    </h5>\r\n                                </div>\r\n                                <div class="card-body">\r\n                                    <div class="form-group">\r\n                                        <label for="venue">Lugar/Pista</label>\r\n                                        <input \r\n                                            id="venue"\r\n                                            v-model="form.venue" \r\n                                            type="text" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.venue }"\r\n                                            placeholder="Ej: Pista Nacional BMX"\r\n                                        >\r\n                                        <div v-if="errors.venue" class="invalid-feedback">\r\n                                            {{ errors.venue[0] }}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="form-group">\r\n                                        <label for="address">Dirección</label>\r\n                                        <textarea \r\n                                            id="address"\r\n                                            v-model="form.address"\r\n                                            class="form-control"\r\n                                            rows="2"\r\n                                            :class="{ \'is-invalid\': errors.address }"\r\n                                            placeholder="Dirección completa del lugar..."\r\n                                        ></textarea>\r\n                                        <div v-if="errors.address" class="invalid-feedback">\r\n                                            {{ errors.address[0] }}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \x3c!-- Panel lateral --\x3e\r\n                        <div class="col-md-4">\r\n                            \x3c!-- Estado --\x3e\r\n                            <div class="card">\r\n                                <div class="card-header">\r\n                                    <h6 class="card-title mb-0">\r\n                                        <i class="fas fa-cog mr-1"></i>\r\n                                        Estado y Configuración\r\n                                    </h6>\r\n                                </div>\r\n                                <div class="card-body">\r\n                                    <div class="form-group">\r\n                                        <label for="status">Estado</label>\r\n                                        <select \r\n                                            id="status"\r\n                                            v-model="form.status" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.status }"\r\n                                        >\r\n                                            <option value="draft">Borrador</option>\r\n                                            <option value="active">Activa</option>\r\n                                            <option value="completed">Completada</option>\r\n                                            <option value="cancelled">Cancelada</option>\r\n                                            <option value="postponed">Pospuesta</option>\r\n                                        </select>\r\n                                        <div v-if="errors.status" class="invalid-feedback">\r\n                                            {{ errors.status[0] }}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="form-group">\r\n                                        <label for="entry_fee">Costo de Inscripción</label>\r\n                                        <div class="input-group">\r\n                                            <div class="input-group-prepend">\r\n                                                <span class="input-group-text">$</span>\r\n                                            </div>\r\n                                            <input \r\n                                                id="entry_fee"\r\n                                                v-model.number="form.entry_fee" \r\n                                                type="number" \r\n                                                step="0.01"\r\n                                                min="0"\r\n                                                class="form-control"\r\n                                                :class="{ \'is-invalid\': errors.entry_fee }"\r\n                                                placeholder="0.00"\r\n                                            >\r\n                                        </div>\r\n                                        <div v-if="errors.entry_fee" class="invalid-feedback">\r\n                                            {{ errors.entry_fee[0] }}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="form-group">\r\n                                        <div class="custom-control custom-checkbox">\r\n                                            <input \r\n                                                id="public_registration_enabled"\r\n                                                v-model="form.public_registration_enabled"\r\n                                                type="checkbox" \r\n                                                class="custom-control-input"\r\n                                            >\r\n                                            <label class="custom-control-label" for="public_registration_enabled">\r\n                                                Permitir inscripción pública\r\n                                            </label>\r\n                                        </div>\r\n                                        <small class="form-text text-muted">Los pilotos pueden inscribirse por sí mismos</small>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            \x3c!-- Club organizador --\x3e\r\n                            <div class="card mt-3">\r\n                                <div class="card-header">\r\n                                    <h6 class="card-title mb-0">\r\n                                        <i class="fas fa-users mr-1"></i>\r\n                                        Organización\r\n                                    </h6>\r\n                                </div>\r\n                                <div class="card-body">\r\n                                    <div class="form-group">\r\n                                        <label for="organizer_club_id">Club Organizador</label>\r\n                                        <select \r\n                                            id="organizer_club_id"\r\n                                            v-model="form.organizer_club_id" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.organizer_club_id }"\r\n                                        >\r\n                                            <option value="">Sin club organizador</option>\r\n                                            <option \r\n                                                v-for="club in clubs" \r\n                                                :key="club.id" \r\n                                                :value="club.id"\r\n                                            >\r\n                                                {{ club.name }}\r\n                                            </option>\r\n                                        </select>\r\n                                        <div v-if="errors.organizer_club_id" class="invalid-feedback">\r\n                                            {{ errors.organizer_club_id[0] }}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="form-group">\r\n                                        <label for="organizer_name">Nombre del Organizador</label>\r\n                                        <input \r\n                                            id="organizer_name"\r\n                                            v-model="form.organizer_name" \r\n                                            type="text" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.organizer_name }"\r\n                                            placeholder="Nombre completo"\r\n                                        >\r\n                                        <div v-if="errors.organizer_name" class="invalid-feedback">\r\n                                            {{ errors.organizer_name[0] }}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="form-group">\r\n                                        <label for="organizer_contact">Email de Contacto</label>\r\n                                        <input \r\n                                            id="organizer_contact"\r\n                                            v-model="form.organizer_contact" \r\n                                            type="email" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.organizer_contact }"\r\n                                            placeholder="email@ejemplo.com"\r\n                                        >\r\n                                        <div v-if="errors.organizer_contact" class="invalid-feedback">\r\n                                            {{ errors.organizer_contact[0] }}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="form-group">\r\n                                        <label for="organizer_phone">Teléfono de Contacto</label>\r\n                                        <input \r\n                                            id="organizer_phone"\r\n                                            v-model="form.organizer_phone" \r\n                                            type="tel" \r\n                                            class="form-control"\r\n                                            :class="{ \'is-invalid\': errors.organizer_phone }"\r\n                                            placeholder="+1 555-0123"\r\n                                        >\r\n                                        <div v-if="errors.organizer_phone" class="invalid-feedback">\r\n                                            {{ errors.organizer_phone[0] }}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    \x3c!-- Botones de acción --\x3e\r\n                    <div class="row mt-4">\r\n                        <div class="col-12">\r\n                            <div class="d-flex justify-content-between">\r\n                                <router-link :to="getBackUrl()" class="btn btn-outline-secondary">\r\n                                    <i class="fas fa-times mr-1"></i>\r\n                                    Cancelar\r\n                                </router-link>\r\n                                <button \r\n                                    type="submit" \r\n                                    class="btn btn-primary"\r\n                                    :disabled="submitting"\r\n                                >\r\n                                    <i v-if="submitting" class="fas fa-spinner fa-spin mr-1"></i>\r\n                                    <i v-else class="fas fa-save mr-1"></i>\r\n                                    {{ submitting ? \'Guardando...\' : (isEditing ? \'Actualizar Jornada\' : \'Crear Jornada\') }}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \'MatchdayForm\',\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            submitting: false,\r\n            championships: [],\r\n            clubs: [],\r\n            form: {\r\n                championship_id: \'\',\r\n                number: \'\',\r\n                name: \'\',\r\n                description: \'\',\r\n                date: \'\',\r\n                start_time: \'\',\r\n                end_time: \'\',\r\n                venue: \'\',\r\n                address: \'\',\r\n                organizer_club_id: \'\',\r\n                organizer_name: \'\',\r\n                organizer_contact: \'\',\r\n                organizer_phone: \'\',\r\n                entry_fee: 0,\r\n                public_registration_enabled: false,\r\n                status: \'draft\'\r\n            },\r\n            errors: {}\r\n        };\r\n    },\r\n    computed: {\r\n        matchdayId() {\r\n            return this.$route.params.id;\r\n        },\r\n        isEditing() {\r\n            return !!this.matchdayId;\r\n        },\r\n        // Detectar desde dónde viene el usuario\r\n        fromChampionship() {\r\n            return this.$route.query.from === \'championship\' && this.$route.query.championshipId;\r\n        },\r\n        fromChampionshipId() {\r\n            return this.$route.query.championshipId;\r\n        }\r\n    },\r\n    async mounted() {\r\n        await this.loadFormData();\r\n        if (this.isEditing) {\r\n            await this.loadMatchday();\r\n        } else if (this.fromChampionship) {\r\n            // Pre-seleccionar el campeonato si viene desde ahí\r\n            this.form.championship_id = this.fromChampionshipId;\r\n        }\r\n    },\r\n    methods: {\r\n        async loadFormData() {\r\n            this.loading = true;\r\n            try {\r\n                // Cargar campeonatos\r\n                const championshipsResponse = await fetch(\'/api/championships\');\r\n                if (championshipsResponse.ok) {\r\n                    const championshipsData = await championshipsResponse.json();\r\n                    this.championships = championshipsData.data || championshipsData;\r\n                }\r\n\r\n                // Cargar clubes\r\n                const clubsResponse = await fetch(\'/api/clubs\');\r\n                if (clubsResponse.ok) {\r\n                    const clubsData = await clubsResponse.json();\r\n                    this.clubs = clubsData.data || clubsData;\r\n                }\r\n            } catch (error) {\r\n                console.error(\'Error loading form data:\', error);\r\n            } finally {\r\n                this.loading = false;\r\n            }\r\n        },\r\n\r\n        async loadMatchday() {\r\n            if (!this.matchdayId) return;\r\n            \r\n            this.loading = true;\r\n            try {\r\n                const response = await fetch(`/api/matchdays/${this.matchdayId}`);\r\n                if (!response.ok) {\r\n                    throw new Error(\'Jornada no encontrada\');\r\n                }\r\n                \r\n                const data = await response.json();\r\n                const matchday = data.success ? data.data : data;\r\n                \r\n                // Llenar el formulario con los datos existentes\r\n                this.form = {\r\n                    championship_id: matchday.championship_id || \'\',\r\n                    number: matchday.number || \'\',\r\n                    name: matchday.name || \'\',\r\n                    description: matchday.description || \'\',\r\n                    date: matchday.date || \'\',\r\n                    start_time: matchday.start_time || \'\',\r\n                    end_time: matchday.end_time || \'\',\r\n                    venue: matchday.venue || \'\',\r\n                    address: matchday.address || \'\',\r\n                    organizer_club_id: matchday.organizer_club_id || \'\',\r\n                    organizer_name: matchday.organizer_name || \'\',\r\n                    organizer_contact: matchday.organizer_contact || \'\',\r\n                    organizer_phone: matchday.organizer_phone || \'\',\r\n                    entry_fee: matchday.entry_fee || 0,\r\n                    public_registration_enabled: matchday.public_registration_enabled || false,\r\n                    status: matchday.status || \'draft\'\r\n                };\r\n            } catch (error) {\r\n                console.error(\'Error loading matchday:\', error);\r\n                alert(\'Error al cargar los datos de la jornada\');\r\n                this.$router.push({ name: \'matchdays\' });\r\n            } finally {\r\n                this.loading = false;\r\n            }\r\n        },\r\n\r\n        async submitForm() {\r\n            this.submitting = true;\r\n            this.errors = {};\r\n\r\n            try {\r\n                const url = this.isEditing \r\n                    ? `/api/matchdays/${this.matchdayId}` \r\n                    : \'/api/matchdays\';\r\n                    \r\n                const method = this.isEditing ? \'PUT\' : \'POST\';\r\n\r\n                const response = await fetch(url, {\r\n                    method: method,\r\n                    headers: {\r\n                        \'Content-Type\': \'application/json\',\r\n                        \'X-CSRF-TOKEN\': document.querySelector(\'meta[name="csrf-token"]\').getAttribute(\'content\')\r\n                    },\r\n                    body: JSON.stringify(this.form)\r\n                });\r\n\r\n                const data = await response.json();\r\n\r\n                if (response.ok) {\r\n                    alert(this.isEditing ? \'Jornada actualizada exitosamente\' : \'Jornada creada exitosamente\');\r\n                    \r\n                    // Redirigir a la vista de detalle\r\n                    const matchdayId = this.isEditing ? this.matchdayId : data.data.id;\r\n                    if (this.fromChampionship) {\r\n                        this.$router.push({ \r\n                            name: \'matchdays.show\', \r\n                            params: { id: matchdayId },\r\n                            query: {\r\n                                from: \'championship\',\r\n                                championshipId: this.fromChampionshipId\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.$router.push({ name: \'matchdays.show\', params: { id: matchdayId } });\r\n                    }\r\n                } else {\r\n                    if (data.errors) {\r\n                        this.errors = data.errors;\r\n                    } else {\r\n                        alert(\'Error: \' + (data.message || \'No se pudo guardar la jornada\'));\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(\'Error submitting form:\', error);\r\n                alert(\'Error de conexión. Por favor, inténtalo de nuevo.\');\r\n            } finally {\r\n                this.submitting = false;\r\n            }\r\n        },\r\n\r\n        // Métodos para navegación inteligente\r\n        getBackUrl() {\r\n            if (this.isEditing) {\r\n                // Si está editando, volver al detalle de la jornada\r\n                if (this.fromChampionship) {\r\n                    return { \r\n                        name: \'matchdays.show\', \r\n                        params: { id: this.matchdayId },\r\n                        query: {\r\n                            from: \'championship\',\r\n                            championshipId: this.fromChampionshipId\r\n                        }\r\n                    };\r\n                } else {\r\n                    return { name: \'matchdays.show\', params: { id: this.matchdayId } };\r\n                }\r\n            } else {\r\n                // Si está creando, volver a la lista\r\n                if (this.fromChampionship) {\r\n                    return { name: \'championships.show\', params: { id: this.fromChampionshipId } };\r\n                }\r\n                return { name: \'matchdays\' };\r\n            }\r\n        },\r\n        \r\n        getBackText() {\r\n            if (this.isEditing) {\r\n                return \'Ver Jornada\';\r\n            } else if (this.fromChampionship) {\r\n                return \'Campeonato\';\r\n            }\r\n            return \'Jornadas\';\r\n        }\r\n    },\r\n    \r\n    async mounted() {\r\n        // Verificar si hay datos iniciales del servidor\r\n        if (window.Laravel && window.Laravel.initialData && window.Laravel.initialData.page === \'matchday-edit\') {\r\n            // Usar datos iniciales del servidor\r\n            const { matchday, championships, clubs } = window.Laravel.initialData;\r\n            \r\n            this.championships = championships || [];\r\n            this.clubs = clubs || [];\r\n            \r\n            if (matchday) {\r\n                this.form = {\r\n                    championship_id: matchday.championship_id || \'\',\r\n                    number: matchday.number || \'\',\r\n                    name: matchday.name || \'\',\r\n                    description: matchday.description || \'\',\r\n                    date: matchday.date || \'\',\r\n                    start_time: matchday.start_time || \'\',\r\n                    end_time: matchday.end_time || \'\',\r\n                    venue: matchday.venue || \'\',\r\n                    address: matchday.address || \'\',\r\n                    organizer_club_id: matchday.organizer_club_id || \'\',\r\n                    organizer_name: matchday.organizer_name || \'\',\r\n                    organizer_contact: matchday.organizer_contact || \'\',\r\n                    organizer_phone: matchday.organizer_phone || \'\',\r\n                    entry_fee: matchday.entry_fee || 0,\r\n                    public_registration_enabled: matchday.public_registration_enabled || false,\r\n                    status: matchday.status || \'draft\'\r\n                };\r\n            }\r\n        } else {\r\n            // Si no hay datos iniciales, cargar desde API\r\n            await this.loadFormData();\r\n            if (this.isEditing) {\r\n                await this.loadMatchday();\r\n            }\r\n        }\r\n        \r\n        // Pre-seleccionar el campeonato si viene desde ahí\r\n        if (this.fromChampionship && !this.form.championship_id) {\r\n            this.form.championship_id = this.fromChampionshipId;\r\n        }\r\n    }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.matchday-form {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.card {\r\n    box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);\r\n}\r\n\r\n.form-group label {\r\n    font-weight: 600;\r\n    color: #495057;\r\n}\r\n\r\n.card-header h5,\r\n.card-header h6 {\r\n    color: #495057;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .card-tools {\r\n        flex-direction: column;\r\n        align-items: stretch;\r\n    }\r\n    \r\n    .card-tools .btn {\r\n        margin-bottom: 0.25rem;\r\n    }\r\n    \r\n    .d-flex.justify-content-between {\r\n        flex-direction: column;\r\n        gap: 1rem;\r\n    }\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const o=s}}]);
//# sourceMappingURL=849.js.map