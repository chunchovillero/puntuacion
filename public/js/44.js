/*! For license information please see 44.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[44],{4044:(t,r,n)=>{n.r(r),n.d(r,{default:()=>p});function e(){var t,r,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function s(n,e,i,o){var s=e&&e.prototype instanceof c?e:c,d=Object.create(s.prototype);return a(d,"_invoke",function(n,e,a){var i,o,s,c=0,d=a||[],u=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(r,n){return i=r,o=0,s=t,p.n=n,l}};function m(n,e){for(o=n,s=e,r=0;!u&&c&&!a&&r<d.length;r++){var a,i=d[r],m=p.p,f=i[2];n>3?(a=f===e)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=m&&((a=n<2&&m<i[1])?(o=0,p.v=e,p.n=i[1]):m<f&&(a=n<3||i[0]>e||e>f)&&(i[4]=n,i[5]=e,p.n=f,o=0))}if(a||n>1)return l;throw u=!0,e}return function(a,d,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,f),o=d,s=f;(r=o<2?t:s)||!u;){i||(o?o<3?(o>1&&(p.n=-1),m(o,s)):p.n=s:p.v=s);try{if(c=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=t}else if((r=(u=p.n<0)?s:n.call(e,p))!==l)break}catch(r){i=t,o=1,s=r}finally{c=1}}return{value:r,done:u}}}(n,i,o),!0),d}var l={};function c(){}function d(){}function u(){}r=Object.getPrototypeOf;var p=[][i]?r(r([][i]())):(a(r={},i,function(){return this}),r),m=u.prototype=c.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,a(t,o,"GeneratorFunction")),t.prototype=Object.create(m),t}return d.prototype=u,a(m,"constructor",u),a(u,"constructor",d),d.displayName="GeneratorFunction",a(u,o,"GeneratorFunction"),a(m),a(m,o,"Generator"),a(m,i,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:f}})()}function a(t,r,n,e){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}a=function(t,r,n,e){if(r)i?i(t,r,{value:n,enumerable:!e,configurable:!e,writable:!e}):t[r]=n;else{var o=function(r,n){a(t,r,function(t){return this._invoke(r,n,t)})};o("next",0),o("throw",1),o("return",2)}},a(t,r,n,e)}function i(t,r,n,e,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?r(l):Promise.resolve(l).then(e,a)}function o(t){return function(){var r=this,n=arguments;return new Promise(function(e,a){var o=t.apply(r,n);function s(t){i(o,e,a,s,l,"next",t)}function l(t){i(o,e,a,s,l,"throw",t)}s(void 0)})}}const s={name:"PilotDetail",data:function(){return{loading:!1,pilot:{}}},computed:{pilotId:function(){return this.$route.params.id},canEdit:function(){var t;return null===(t=window.Laravel)||void 0===t||null===(t=t.user)||void 0===t?void 0:t.authenticated},canDelete:function(){var t;return null===(t=window.Laravel)||void 0===t||null===(t=t.user)||void 0===t?void 0:t.authenticated},fromClub:function(){return"club"===this.$route.query.from&&this.$route.query.clubId},fromClubId:function(){return this.$route.query.clubId},fromMatchday:function(){return"matchday"===this.$route.query.from&&this.$route.query.matchdayId},fromMatchdayId:function(){return this.$route.query.matchdayId}},watch:{$route:{handler:function(t,r){var n=this;console.log("PilotDetail: Route changed from",null==r?void 0:r.fullPath,"to",t.fullPath),console.log("PilotDetail: Query params:",t.query),"true"===t.query.updated&&(console.log("PilotDetail: Detected updated parameter in route change"),this.$nextTick(function(){n.showSuccessMessage("Piloto actualizado exitosamente")}),this.$router.replace({path:t.path})),t.params.id!==(null==r?void 0:r.params.id)&&(console.log("PilotDetail: Pilot ID changed, reloading data"),this.loadPilot())},immediate:!0}},mounted:function(){var t=this;return o(e().m(function r(){return e().w(function(r){for(;;)switch(r.n){case 0:return console.log("PilotDetail mounted, pilotId:",t.pilotId),console.log("PilotDetail: Route query params:",t.$route.query),r.n=1,t.loadPilot();case 1:return r.a(2)}},r)}))()},methods:{loadPilot:function(){var t=this;return o(e().m(function r(){var n,a,i,o;return e().w(function(r){for(;;)switch(r.n){case 0:return t.loading=!0,console.log("PilotDetail: Loading pilot with ID:",t.pilotId),r.p=1,n="/api/pilots/".concat(t.pilotId),console.log("PilotDetail: Fetching from URL:",n),r.n=2,fetch(n);case 2:if(a=r.v,console.log("PilotDetail: Response status:",a.status),console.log("PilotDetail: Response ok:",a.ok),!a.ok){r.n=4;break}return r.n=3,a.json();case 3:i=r.v,console.log("PilotDetail: API Response data:",i),t.pilot=i.data||i,console.log("PilotDetail: Pilot loaded:",t.pilot),r.n=5;break;case 4:console.log("PilotDetail: Response not ok, redirecting to pilots list"),t.$router.push("/pilotos");case 5:r.n=7;break;case 6:r.p=6,o=r.v,console.error("Error loading pilot:",o),t.$router.push("/pilotos");case 7:return r.p=7,t.loading=!1,r.f(7);case 8:return r.a(2)}},r,null,[[1,6,7,8]])}))()},confirmDelete:function(){var t=this;return o(e().m(function r(){return e().w(function(r){for(;;)switch(r.n){case 0:if(!confirm('¿Estás seguro de desactivar al piloto "'.concat(t.pilot.first_name," ").concat(t.pilot.last_name,'"? El piloto quedará inactivo pero no se eliminará de la base de datos.'))){r.n=1;break}return r.n=1,t.deletePilot();case 1:return r.a(2)}},r)}))()},deletePilot:function(){var t=this;return o(e().m(function r(){var n;return e().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,r.n=1,fetch("/api/pilots/".concat(t.pilot.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"}});case 1:if(!r.v.ok){r.n=3;break}return t.showSuccessMessage("Piloto desactivado exitosamente"),r.n=2,t.loadPilot();case 2:r.n=4;break;case 3:alert("Error al desactivar el piloto");case 4:r.n=6;break;case 5:r.p=5,n=r.v,console.error("Error deleting pilot:",n),alert("Error al eliminar el piloto");case 6:return r.a(2)}},r,null,[[0,5]])}))()},confirmReactivate:function(){var t=this;return o(e().m(function r(){return e().w(function(r){for(;;)switch(r.n){case 0:if(!confirm('¿Estás seguro de reactivar al piloto "'.concat(t.pilot.first_name," ").concat(t.pilot.last_name,'"? El piloto volverá a estar activo.'))){r.n=1;break}return r.n=1,t.reactivatePilot();case 1:return r.a(2)}},r)}))()},reactivatePilot:function(){var t=this;return o(e().m(function r(){var n;return e().w(function(r){for(;;)switch(r.n){case 0:return r.p=0,r.n=1,fetch("/api/pilots/".concat(t.pilot.id,"/reactivate"),{method:"PATCH",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"}});case 1:if(!r.v.ok){r.n=3;break}return t.showSuccessMessage("Piloto reactivado exitosamente"),r.n=2,t.loadPilot();case 2:r.n=4;break;case 3:alert("Error al reactivar el piloto");case 4:r.n=6;break;case 5:r.p=5,n=r.v,console.error("Error reactivating pilot:",n),alert("Error al reactivar el piloto");case 6:return r.a(2)}},r,null,[[0,5]])}))()},getStatusClass:function(t){return{active:"badge badge-success",inactive:"badge badge-secondary",suspended:"badge badge-danger"}[t]||"badge badge-secondary"},getStatusLabel:function(t){return{active:"Activo",inactive:"Inactivo",suspended:"Suspendido"}[t]||"Desconocido"},formatDate:function(t){return t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No disponible"},getBackUrl:function(){return this.fromClub?"/clubes/".concat(this.fromClubId):this.fromMatchday?"/jornadas/".concat(this.fromMatchdayId):"/pilotos"},getBackText:function(){return this.fromClub?"Club":this.fromMatchday?"Jornada":"Pilotos"},getBackButtonText:function(){return this.fromClub?"Volver al club":this.fromMatchday?"Volver a la jornada":"Volver a la lista de pilotos"},showSuccessMessage:function(t){console.log("PilotDetail: Showing success message:",t),document.querySelectorAll(".pilot-success-notification").forEach(function(t){return t.remove()});var r=document.createElement("div");r.className="alert alert-success alert-dismissible fade show position-fixed pilot-success-notification",r.style.cssText="\n                top: 20px; \n                right: 20px; \n                z-index: 10000; \n                min-width: 300px; \n                max-width: 500px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n                border: none;\n                font-weight: 500;\n            ",r.innerHTML='\n                <div style="display: flex; align-items: center;">\n                    <i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px; font-size: 18px;"></i>\n                    <span>'.concat(t,'</span>\n                    <button type="button" class="close" onclick="this.parentElement.parentElement.remove()" style="margin-left: auto; padding: 0 8px;">\n                        <span style="font-size: 18px;">&times;</span>\n                    </button>\n                </div>\n            '),document.body.appendChild(r),console.log("PilotDetail: Notification added to DOM with improved styling"),r.offsetHeight,setTimeout(function(){r.parentNode&&(r.style.opacity="0",setTimeout(function(){r.parentNode&&(r.parentNode.removeChild(r),console.log("PilotDetail: Notification auto-removed"))},300))},5e3)}}};var l=n(5072),c=n.n(l),d=n(5283),u={insert:"head",singleton:!1};c()(d.A,u);d.A.locals;const p=(0,n(4486).A)(s,function(){var t=this,r=t._self._c;return r("div",{staticClass:"pilot-detail"},[r("div",{staticClass:"content-header"},[r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row mb-2"},[t._m(0),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("ol",{staticClass:"breadcrumb float-sm-right"},[r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:"/"}},[t._v("Inicio")])],1),t._v(" "),r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:t.getBackUrl()}},[t._v(t._s(t.getBackText()))])],1),t._v(" "),r("li",{staticClass:"breadcrumb-item active"},[t._v("\n                            "+t._s(t.pilot.first_name)+" "+t._s(t.pilot.last_name)+"\n                        ")])])])])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"container-fluid"},[t.loading?r("div",{staticClass:"text-center py-5"},[t._m(1),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Cargando información del piloto...")])]):t.pilot.id?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body text-center"},[t.pilot.photo?r("img",{staticClass:"img-fluid rounded-circle mb-3",staticStyle:{width:"150px",height:"150px","object-fit":"cover"},attrs:{src:"/storage/"+t.pilot.photo,alt:"Foto de "+t.pilot.first_name+" "+t.pilot.last_name}}):r("div",{staticClass:"bg-secondary rounded-circle d-inline-flex align-items-center justify-content-center mb-3",staticStyle:{width:"150px",height:"150px"}},[r("i",{staticClass:"fas fa-user fa-4x text-white"})]),t._v(" "),r("h3",[t._v(t._s(t.pilot.first_name)+" "+t._s(t.pilot.last_name))]),t._v(" "),r("span",{class:t.getStatusClass(t.pilot.status)},[t._v("\n                                "+t._s(t.getStatusLabel(t.pilot.status))+"\n                            ")]),t._v(" "),t.canEdit?r("div",{staticClass:"mt-3"},[r("router-link",{staticClass:"btn btn-warning btn-sm mr-2",attrs:{to:{name:"pilots.edit",params:{id:t.pilot.id}}}},[r("i",{staticClass:"fas fa-edit"}),t._v(" Editar\n                                ")]),t._v(" "),t.canDelete&&"active"===t.pilot.status?r("button",{staticClass:"btn btn-outline-warning btn-sm mr-2",on:{click:t.confirmDelete}},[r("i",{staticClass:"fas fa-user-slash"}),t._v(" Desactivar\n                                ")]):t._e(),t._v(" "),t.canDelete&&"inactive"===t.pilot.status?r("button",{staticClass:"btn btn-outline-success btn-sm mr-2",on:{click:t.confirmReactivate}},[r("i",{staticClass:"fas fa-user-check"}),t._v(" Reactivar\n                                ")]):t._e()],1):t._e()])])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card"},[t._m(2),t._v(" "),r("div",{staticClass:"card-body"},[r("dl",{staticClass:"row"},[r("dt",{staticClass:"col-sm-3"},[t._v("Nombre completo:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.pilot.first_name)+" "+t._s(t.pilot.last_name))]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Edad:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.pilot.age||"No especificada"))]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Club:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t.pilot.club?r("span",[r("i",{staticClass:"fas fa-flag mr-1"}),t._v("\n                                        "+t._s(t.pilot.club.name)+"\n                                    ")]):r("span",{staticClass:"text-muted"},[t._v("Sin club asignado")])]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Categoría:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t.pilot.category?r("span",[r("i",{staticClass:"fas fa-tags mr-1"}),t._v("\n                                        "+t._s(t.pilot.category.name)+"\n                                    ")]):r("span",{staticClass:"text-muted"},[t._v("Sin categoría asignada")])]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Estado:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[r("span",{class:t.getStatusClass(t.pilot.status)},[t._v("\n                                        "+t._s(t.getStatusLabel(t.pilot.status))+"\n                                    ")])]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Fecha de registro:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.formatDate(t.pilot.created_at)))]),t._v(" "),r("dt",{staticClass:"col-sm-3"},[t._v("Última actualización:")]),t._v(" "),r("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.formatDate(t.pilot.updated_at)))])])])]),t._v(" "),t._m(3)])]):t._e(),t._v(" "),r("div",{staticClass:"row mt-4"},[r("div",{staticClass:"col-12"},[r("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.getBackUrl()}},[r("i",{staticClass:"fas fa-arrow-left mr-1"}),t._v("\n                        "+t._s(t.getBackButtonText())+"\n                    ")])],1)])])])])},[function(){var t=this._self._c;return t("div",{staticClass:"col-sm-6"},[t("h1",{staticClass:"m-0"},[t("i",{staticClass:"fas fa-user-ninja mr-2"}),this._v("\n                        Detalle del Piloto\n                    ")])])},function(){var t=this._self._c;return t("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Cargando...")])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("h3",{staticClass:"card-title"},[this._v("Información del Piloto")])])},function(){var t=this,r=t._self._c;return r("div",{staticClass:"card mt-4"},[r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[t._v("Historial de Competiciones")])]),t._v(" "),r("div",{staticClass:"card-body"},[r("p",{staticClass:"text-muted"},[r("i",{staticClass:"fas fa-info-circle mr-1"}),t._v("\n                                Esta funcionalidad estará disponible próximamente.\n                            ")])])])}],!1,null,"ebc90bbc",null).exports},5283:(t,r,n)=>{n.d(r,{A:()=>s});var e=n(4991),a=n.n(e),i=n(6314),o=n.n(i)()(a());o.push([t.id,".pilot-detail[data-v-ebc90bbc]{padding:0}.content-header[data-v-ebc90bbc]{padding:15px 0}.card[data-v-ebc90bbc]{border:none;box-shadow:0 0 1px rgba(0,0,0,.125),0 1px 3px rgba(0,0,0,.2)}.dl-horizontal dt[data-v-ebc90bbc]{text-align:left}","",{version:3,sources:["webpack://./resources/js/components/forms/PilotDetail.vue"],names:[],mappings:"AA2bA,+BACA,SACA,CAEA,iCACA,cACA,CAEA,uBACA,WAAA,CACA,4DACA,CAEA,mCACA,eACA",sourcesContent:['<template>\r\n    <div class="pilot-detail">\r\n        \x3c!-- Header --\x3e\r\n        <div class="content-header">\r\n            <div class="container-fluid">\r\n                <div class="row mb-2">\r\n                    <div class="col-sm-6">\r\n                        <h1 class="m-0">\r\n                            <i class="fas fa-user-ninja mr-2"></i>\r\n                            Detalle del Piloto\r\n                        </h1>\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <ol class="breadcrumb float-sm-right">\r\n                            <li class="breadcrumb-item">\r\n                                <router-link to="/">Inicio</router-link>\r\n                            </li>\r\n                            <li class="breadcrumb-item">\r\n                                <router-link :to="getBackUrl()">{{ getBackText() }}</router-link>\r\n                            </li>\r\n                            <li class="breadcrumb-item active">\r\n                                {{ pilot.first_name }} {{ pilot.last_name }}\r\n                            </li>\r\n                        </ol>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- Content --\x3e\r\n        <section class="content">\r\n            <div class="container-fluid">\r\n                <div v-if="loading" class="text-center py-5">\r\n                    <div class="spinner-border text-primary" role="status">\r\n                        <span class="sr-only">Cargando...</span>\r\n                    </div>\r\n                    <p class="mt-3">Cargando información del piloto...</p>\r\n                </div>\r\n\r\n                <div v-else-if="pilot.id" class="row">\r\n                    \x3c!-- Información Principal --\x3e\r\n                    <div class="col-md-4">\r\n                        <div class="card">\r\n                            <div class="card-body text-center">\r\n                                <img \r\n                                    v-if="pilot.photo" \r\n                                    :src="\'/storage/\' + pilot.photo" \r\n                                    :alt="\'Foto de \' + pilot.first_name + \' \' + pilot.last_name"\r\n                                    class="img-fluid rounded-circle mb-3"\r\n                                    style="width: 150px; height: 150px; object-fit: cover;"\r\n                                >\r\n                                <div \r\n                                    v-else\r\n                                    class="bg-secondary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" \r\n                                    style="width: 150px; height: 150px;"\r\n                                >\r\n                                    <i class="fas fa-user fa-4x text-white"></i>\r\n                                </div>\r\n                                \r\n                                <h3>{{ pilot.first_name }} {{ pilot.last_name }}</h3>\r\n                                \r\n                                <span :class="getStatusClass(pilot.status)">\r\n                                    {{ getStatusLabel(pilot.status) }}\r\n                                </span>\r\n\r\n                                <div class="mt-3" v-if="canEdit">\r\n                                    <router-link \r\n                                        :to="{ name: \'pilots.edit\', params: { id: pilot.id } }" \r\n                                        class="btn btn-warning btn-sm mr-2"\r\n                                    >\r\n                                        <i class="fas fa-edit"></i> Editar\r\n                                    </router-link>\r\n                                    \r\n                                    \x3c!-- Mostrar botón de desactivar solo si el piloto está activo --\x3e\r\n                                    <button \r\n                                        @click="confirmDelete" \r\n                                        class="btn btn-outline-warning btn-sm mr-2"\r\n                                        v-if="canDelete && pilot.status === \'active\'"\r\n                                    >\r\n                                        <i class="fas fa-user-slash"></i> Desactivar\r\n                                    </button>\r\n                                    \r\n                                    \x3c!-- Mostrar botón de reactivar solo si el piloto está inactivo --\x3e\r\n                                    <button \r\n                                        @click="confirmReactivate" \r\n                                        class="btn btn-outline-success btn-sm mr-2"\r\n                                        v-if="canDelete && pilot.status === \'inactive\'"\r\n                                    >\r\n                                        <i class="fas fa-user-check"></i> Reactivar\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    \x3c!-- Información Detallada --\x3e\r\n                    <div class="col-md-8">\r\n                        <div class="card">\r\n                            <div class="card-header">\r\n                                <h3 class="card-title">Información del Piloto</h3>\r\n                            </div>\r\n                            <div class="card-body">\r\n                                <dl class="row">\r\n                                    <dt class="col-sm-3">Nombre completo:</dt>\r\n                                    <dd class="col-sm-9">{{ pilot.first_name }} {{ pilot.last_name }}</dd>\r\n\r\n                                    <dt class="col-sm-3">Edad:</dt>\r\n                                    <dd class="col-sm-9">{{ pilot.age || \'No especificada\' }}</dd>\r\n\r\n                                    <dt class="col-sm-3">Club:</dt>\r\n                                    <dd class="col-sm-9">\r\n                                        <span v-if="pilot.club">\r\n                                            <i class="fas fa-flag mr-1"></i>\r\n                                            {{ pilot.club.name }}\r\n                                        </span>\r\n                                        <span v-else class="text-muted">Sin club asignado</span>\r\n                                    </dd>\r\n\r\n                                    <dt class="col-sm-3">Categoría:</dt>\r\n                                    <dd class="col-sm-9">\r\n                                        <span v-if="pilot.category">\r\n                                            <i class="fas fa-tags mr-1"></i>\r\n                                            {{ pilot.category.name }}\r\n                                        </span>\r\n                                        <span v-else class="text-muted">Sin categoría asignada</span>\r\n                                    </dd>\r\n\r\n                                    <dt class="col-sm-3">Estado:</dt>\r\n                                    <dd class="col-sm-9">\r\n                                        <span :class="getStatusClass(pilot.status)">\r\n                                            {{ getStatusLabel(pilot.status) }}\r\n                                        </span>\r\n                                    </dd>\r\n\r\n                                    <dt class="col-sm-3">Fecha de registro:</dt>\r\n                                    <dd class="col-sm-9">{{ formatDate(pilot.created_at) }}</dd>\r\n\r\n                                    <dt class="col-sm-3">Última actualización:</dt>\r\n                                    <dd class="col-sm-9">{{ formatDate(pilot.updated_at) }}</dd>\r\n                                </dl>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \x3c!-- Historial de Competiciones (si existe) --\x3e\r\n                        <div class="card mt-4">\r\n                            <div class="card-header">\r\n                                <h3 class="card-title">Historial de Competiciones</h3>\r\n                            </div>\r\n                            <div class="card-body">\r\n                                <p class="text-muted">\r\n                                    <i class="fas fa-info-circle mr-1"></i>\r\n                                    Esta funcionalidad estará disponible próximamente.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                \x3c!-- Botón de volver --\x3e\r\n                <div class="row mt-4">\r\n                    <div class="col-12">\r\n                        <router-link :to="getBackUrl()" class="btn btn-secondary">\r\n                            <i class="fas fa-arrow-left mr-1"></i>\r\n                            {{ getBackButtonText() }}\r\n                        </router-link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \'PilotDetail\',\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            pilot: {}\r\n        };\r\n    },\r\n    computed: {\r\n        pilotId() {\r\n            return this.$route.params.id;\r\n        },\r\n        canEdit() {\r\n            return window.Laravel?.user?.authenticated;\r\n        },\r\n        canDelete() {\r\n            return window.Laravel?.user?.authenticated;\r\n        },\r\n        // Detectar desde dónde viene el usuario\r\n        fromClub() {\r\n            return this.$route.query.from === \'club\' && this.$route.query.clubId;\r\n        },\r\n        fromClubId() {\r\n            return this.$route.query.clubId;\r\n        },\r\n        fromMatchday() {\r\n            return this.$route.query.from === \'matchday\' && this.$route.query.matchdayId;\r\n        },\r\n        fromMatchdayId() {\r\n            return this.$route.query.matchdayId;\r\n        }\r\n    },\r\n    watch: {\r\n        \'$route\': {\r\n            handler(to, from) {\r\n                console.log(\'PilotDetail: Route changed from\', from?.fullPath, \'to\', to.fullPath);\r\n                console.log(\'PilotDetail: Query params:\', to.query);\r\n                \r\n                // Si viene con parámetro updated, mostrar mensaje\r\n                if (to.query.updated === \'true\') {\r\n                    console.log(\'PilotDetail: Detected updated parameter in route change\');\r\n                    // Usar nextTick para asegurar que el DOM esté actualizado\r\n                    this.$nextTick(() => {\r\n                        this.showSuccessMessage(\'Piloto actualizado exitosamente\');\r\n                    });\r\n                    // Limpiar el parámetro de la URL\r\n                    this.$router.replace({ path: to.path });\r\n                }\r\n                \r\n                // Recargar datos cuando cambia la ruta (ej: al volver de edición)\r\n                if (to.params.id !== from?.params.id) {\r\n                    console.log(\'PilotDetail: Pilot ID changed, reloading data\');\r\n                    this.loadPilot();\r\n                }\r\n            },\r\n            immediate: true\r\n        }\r\n    },\r\n    async mounted() {\r\n        console.log(\'PilotDetail mounted, pilotId:\', this.pilotId);\r\n        console.log(\'PilotDetail: Route query params:\', this.$route.query);\r\n        \r\n        await this.loadPilot();\r\n        \r\n        // La detección de updated=true se maneja en el watcher con immediate:true\r\n        // para evitar duplicaciones\r\n    },\r\n    methods: {\r\n        async loadPilot() {\r\n            this.loading = true;\r\n            console.log(\'PilotDetail: Loading pilot with ID:\', this.pilotId);\r\n            try {\r\n                const apiUrl = `/api/pilots/${this.pilotId}`;\r\n                console.log(\'PilotDetail: Fetching from URL:\', apiUrl);\r\n                const response = await fetch(apiUrl);\r\n                \r\n                console.log(\'PilotDetail: Response status:\', response.status);\r\n                console.log(\'PilotDetail: Response ok:\', response.ok);\r\n                \r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    console.log(\'PilotDetail: API Response data:\', data);\r\n                    this.pilot = data.data || data;\r\n                    console.log(\'PilotDetail: Pilot loaded:\', this.pilot);\r\n                } else {\r\n                    console.log(\'PilotDetail: Response not ok, redirecting to pilots list\');\r\n                    this.$router.push(\'/pilotos\');\r\n                }\r\n            } catch (error) {\r\n                console.error(\'Error loading pilot:\', error);\r\n                this.$router.push(\'/pilotos\');\r\n            } finally {\r\n                this.loading = false;\r\n            }\r\n        },\r\n\r\n        async confirmDelete() {\r\n            if (confirm(`¿Estás seguro de desactivar al piloto "${this.pilot.first_name} ${this.pilot.last_name}"? El piloto quedará inactivo pero no se eliminará de la base de datos.`)) {\r\n                await this.deletePilot();\r\n            }\r\n        },\r\n\r\n        async deletePilot() {\r\n            try {\r\n                const response = await fetch(`/api/pilots/${this.pilot.id}`, {\r\n                    method: \'DELETE\',\r\n                    headers: {\r\n                        \'X-CSRF-TOKEN\': document.querySelector(\'meta[name="csrf-token"]\').getAttribute(\'content\'),\r\n                        \'Content-Type\': \'application/json\',\r\n                    }\r\n                });\r\n\r\n                if (response.ok) {\r\n                    this.showSuccessMessage(\'Piloto desactivado exitosamente\');\r\n                    // Recargar los datos del piloto para actualizar el estado\r\n                    await this.loadPilot();\r\n                } else {\r\n                    alert(\'Error al desactivar el piloto\');\r\n                }\r\n            } catch (error) {\r\n                console.error(\'Error deleting pilot:\', error);\r\n                alert(\'Error al eliminar el piloto\');\r\n            }\r\n        },\r\n\r\n        async confirmReactivate() {\r\n            if (confirm(`¿Estás seguro de reactivar al piloto "${this.pilot.first_name} ${this.pilot.last_name}"? El piloto volverá a estar activo.`)) {\r\n                await this.reactivatePilot();\r\n            }\r\n        },\r\n\r\n        async reactivatePilot() {\r\n            try {\r\n                const response = await fetch(`/api/pilots/${this.pilot.id}/reactivate`, {\r\n                    method: \'PATCH\',\r\n                    headers: {\r\n                        \'X-CSRF-TOKEN\': document.querySelector(\'meta[name="csrf-token"]\').getAttribute(\'content\'),\r\n                        \'Content-Type\': \'application/json\',\r\n                    }\r\n                });\r\n\r\n                if (response.ok) {\r\n                    this.showSuccessMessage(\'Piloto reactivado exitosamente\');\r\n                    // Recargar los datos del piloto para actualizar el estado\r\n                    await this.loadPilot();\r\n                } else {\r\n                    alert(\'Error al reactivar el piloto\');\r\n                }\r\n            } catch (error) {\r\n                console.error(\'Error reactivating pilot:\', error);\r\n                alert(\'Error al reactivar el piloto\');\r\n            }\r\n        },\r\n\r\n        getStatusClass(status) {\r\n            const classes = {\r\n                \'active\': \'badge badge-success\',\r\n                \'inactive\': \'badge badge-secondary\',\r\n                \'suspended\': \'badge badge-danger\'\r\n            };\r\n            return classes[status] || \'badge badge-secondary\';\r\n        },\r\n\r\n        getStatusLabel(status) {\r\n            const labels = {\r\n                \'active\': \'Activo\',\r\n                \'inactive\': \'Inactivo\',\r\n                \'suspended\': \'Suspendido\'\r\n            };\r\n            return labels[status] || \'Desconocido\';\r\n        },\r\n\r\n        formatDate(dateString) {\r\n            if (!dateString) return \'No disponible\';\r\n            \r\n            const date = new Date(dateString);\r\n            return date.toLocaleDateString(\'es-ES\', {\r\n                year: \'numeric\',\r\n                month: \'long\',\r\n                day: \'numeric\',\r\n                hour: \'2-digit\',\r\n                minute: \'2-digit\'\r\n            });\r\n        },\r\n\r\n        // Métodos para navegación inteligente\r\n        getBackUrl() {\r\n            if (this.fromClub) {\r\n                return `/clubes/${this.fromClubId}`;\r\n            }\r\n            if (this.fromMatchday) {\r\n                return `/jornadas/${this.fromMatchdayId}`;\r\n            }\r\n            return \'/pilotos\';\r\n        },\r\n        \r\n        getBackText() {\r\n            if (this.fromClub) {\r\n                return \'Club\';\r\n            }\r\n            if (this.fromMatchday) {\r\n                return \'Jornada\';\r\n            }\r\n            return \'Pilotos\';\r\n        },\r\n        \r\n        getBackButtonText() {\r\n            if (this.fromClub) {\r\n                return \'Volver al club\';\r\n            }\r\n            if (this.fromMatchday) {\r\n                return \'Volver a la jornada\';\r\n            }\r\n            return \'Volver a la lista de pilotos\';\r\n        },\r\n\r\n        showSuccessMessage(message) {\r\n            console.log(\'PilotDetail: Showing success message:\', message);\r\n            \r\n            // Remover cualquier notificación existente\r\n            const existingNotifications = document.querySelectorAll(\'.pilot-success-notification\');\r\n            existingNotifications.forEach(notification => notification.remove());\r\n            \r\n            // Crear notificación temporal\r\n            const notification = document.createElement(\'div\');\r\n            notification.className = \'alert alert-success alert-dismissible fade show position-fixed pilot-success-notification\';\r\n            notification.style.cssText = `\r\n                top: 20px; \r\n                right: 20px; \r\n                z-index: 10000; \r\n                min-width: 300px; \r\n                max-width: 500px;\r\n                box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n                border: none;\r\n                font-weight: 500;\r\n            `;\r\n            notification.innerHTML = `\r\n                <div style="display: flex; align-items: center;">\r\n                    <i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px; font-size: 18px;"></i>\r\n                    <span>${message}</span>\r\n                    <button type="button" class="close" onclick="this.parentElement.parentElement.remove()" style="margin-left: auto; padding: 0 8px;">\r\n                        <span style="font-size: 18px;">&times;</span>\r\n                    </button>\r\n                </div>\r\n            `;\r\n            \r\n            document.body.appendChild(notification);\r\n            console.log(\'PilotDetail: Notification added to DOM with improved styling\');\r\n            \r\n            // Forzar un reflow para asegurar que se muestre\r\n            notification.offsetHeight;\r\n            \r\n            // Auto-remover después de 5 segundos\r\n            setTimeout(() => {\r\n                if (notification.parentNode) {\r\n                    notification.style.opacity = \'0\';\r\n                    setTimeout(() => {\r\n                        if (notification.parentNode) {\r\n                            notification.parentNode.removeChild(notification);\r\n                            console.log(\'PilotDetail: Notification auto-removed\');\r\n                        }\r\n                    }, 300);\r\n                }\r\n            }, 5000);\r\n        }\r\n    }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.pilot-detail {\r\n    padding: 0;\r\n}\r\n\r\n.content-header {\r\n    padding: 15px 0;\r\n}\r\n\r\n.card {\r\n    border: none;\r\n    box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);\r\n}\r\n\r\n.dl-horizontal dt {\r\n    text-align: left;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const s=o}}]);
//# sourceMappingURL=44.js.map