/*! For license information please see 224.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[224],{2224:(a,t,r)=>{r.r(t),r.d(t,{default:()=>p});function n(){var a,t,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,s,i){var o=n&&n.prototype instanceof d?n:d,l=Object.create(o.prototype);return e(l,"_invoke",function(r,n,e){var s,i,o,d=0,l=e||[],m=!1,p={p:0,n:0,v:a,a:u,f:u.bind(a,4),d:function(t,r){return s=t,i=0,o=a,p.n=r,c}};function u(r,n){for(i=r,o=n,t=0;!m&&d&&!e&&t<l.length;t++){var e,s=l[t],u=p.p,h=s[2];r>3?(e=h===n)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=a):s[0]<=u&&((e=r<2&&u<s[1])?(i=0,p.v=n,p.n=s[1]):u<h&&(e=r<3||s[0]>n||n>h)&&(s[4]=r,s[5]=n,p.n=h,i=0))}if(e||r>1)return c;throw m=!0,n}return function(e,l,h){if(d>1)throw TypeError("Generator is already running");for(m&&1===l&&u(l,h),i=l,o=h;(t=i<2?a:o)||!m;){s||(i?i<3?(i>1&&(p.n=-1),u(i,o)):p.n=o:p.v=o);try{if(d=2,s){if(i||(e="next"),t=s[e]){if(!(t=t.call(s,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=s.return)&&t.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+e+"' method"),i=1);s=a}else if((t=(m=p.n<0)?o:r.call(n,p))!==c)break}catch(t){s=a,i=1,o=t}finally{d=1}}return{value:t,done:m}}}(r,s,i),!0),l}var c={};function d(){}function l(){}function m(){}t=Object.getPrototypeOf;var p=[][s]?t(t([][s]())):(e(t={},s,function(){return this}),t),u=m.prototype=d.prototype=Object.create(p);function h(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,m):(a.__proto__=m,e(a,i,"GeneratorFunction")),a.prototype=Object.create(u),a}return l.prototype=m,e(u,"constructor",m),e(m,"constructor",l),l.displayName="GeneratorFunction",e(m,i,"GeneratorFunction"),e(u),e(u,i,"Generator"),e(u,s,function(){return this}),e(u,"toString",function(){return"[object Generator]"}),(n=function(){return{w:o,m:h}})()}function e(a,t,r,n){var s=Object.defineProperty;try{s({},"",{})}catch(a){s=0}e=function(a,t,r,n){if(t)s?s(a,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):a[t]=r;else{var i=function(t,r){e(a,t,function(a){return this._invoke(t,r,a)})};i("next",0),i("throw",1),i("return",2)}},e(a,t,r,n)}function s(a,t,r,n,e,s,i){try{var o=a[s](i),c=o.value}catch(a){return void r(a)}o.done?t(c):Promise.resolve(c).then(n,e)}const i={name:"MatchdayDetail",data:function(){return{matchday:null,loading:!1,categoriesData:[],expandedCategories:{}}},computed:{matchdayId:function(){return this.$route.params.id},canEdit:function(){var a;return(null===(a=window.Laravel)||void 0===a||null===(a=a.user)||void 0===a?void 0:a.authenticated)||!1},fromChampionship:function(){return"championship"===this.$route.query.from&&this.$route.query.championshipId},fromChampionshipId:function(){return this.$route.query.championshipId}},mounted:function(){this.loadMatchday()},methods:{loadMatchday:function(){var a,t=this;return(a=n().m(function a(){var r,e,s;return n().w(function(a){for(;;)switch(a.n){case 0:if(t.loading=!0,a.p=1,!window.Laravel||!window.Laravel.initialData||"matchday-detail"!==window.Laravel.initialData.page){a.n=2;break}t.matchday=window.Laravel.initialData.matchday,a.n=6;break;case 2:return a.n=3,fetch("/api/matchdays/".concat(t.matchdayId));case 3:if((r=a.v).ok){a.n=4;break}throw new Error("Jornada no encontrada");case 4:return a.n=5,r.json();case 5:e=a.v,t.matchday=e.success?e.data:e;case 6:a.n=8;break;case 7:a.p=7,s=a.v,console.error("Error loading matchday:",s),t.matchday=null;case 8:return a.p=8,t.loading=!1,t.processCategories(),a.f(8);case 9:return a.a(2)}},a,null,[[1,7,8,9]])}),function(){var t=this,r=arguments;return new Promise(function(n,e){var i=a.apply(t,r);function o(a){s(i,n,e,o,c,"next",a)}function c(a){s(i,n,e,o,c,"throw",a)}o(void 0)})})()},processCategories:function(){if(!this.matchday||!this.matchday.participants)return this.categoriesData=[],void(this.expandedCategories={});var a={};this.matchday.participants.forEach(function(t){var r,n,e=(null===(r=t.pilot)||void 0===r||null===(r=r.category)||void 0===r?void 0:r.name)||"Sin categoría";a[e]||(a[e]={category:e,pilots:[],stats:{active:0,inactive:0,clubs:new Set}}),a[e].pilots.push(t),"active"===t.status||"confirmed"===t.status?a[e].stats.active++:a[e].stats.inactive++,null!==(n=t.pilot)&&void 0!==n&&null!==(n=n.club)&&void 0!==n&&n.name&&a[e].stats.clubs.add(t.pilot.club.name)}),Object.values(a).forEach(function(a){a.stats.clubs=a.stats.clubs.size});var t=Object.values(a).sort(function(a,t){return"Sin categoría"===a.category?1:"Sin categoría"===t.category?-1:a.category.localeCompare(t.category)});this.categoriesData=t;var r={};t.forEach(function(a,t){r[t]=0===t}),this.expandedCategories=r},toggleCategory:function(a){this.$set(this.expandedCategories,a,!this.expandedCategories[a])},isCategoryExpanded:function(a){return this.expandedCategories[a]||!1},getBackUrl:function(){return this.fromChampionship?"/campeonatos/".concat(this.fromChampionshipId):"/jornadas"},getBackText:function(){return this.fromChampionship?"Campeonato":"Jornadas"},getStatusClass:function(a){return{active:"badge badge-success",completed:"badge badge-primary",cancelled:"badge badge-danger",postponed:"badge badge-warning",draft:"badge badge-secondary"}[a]||"badge badge-secondary"},getStatusLabel:function(a){return{active:"Activa",completed:"Completada",cancelled:"Cancelada",postponed:"Pospuesta",draft:"Borrador"}[a]||"Desconocido"},getParticipantStatusClass:function(a){return{active:"badge badge-success",inactive:"badge badge-secondary",disqualified:"badge badge-danger"}[a]||"badge badge-secondary"},getParticipantStatusLabel:function(a){return{active:"Activo",inactive:"Inactivo",disqualified:"Descalificado"}[a]||"Desconocido"},formatDate:function(a){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a)return"No disponible";try{var r=new Date(a),n={year:"numeric",month:"long",day:"numeric"};return t&&(n.hour="2-digit",n.minute="2-digit"),r.toLocaleDateString("es-ES",n)}catch(a){return"Fecha inválida"}}}},o=i;var c=r(5072),d=r.n(c),l=r(6135),m={insert:"head",singleton:!1};d()(l.A,m);l.A.locals;const p=(0,r(4486).A)(o,function(){var a=this,t=a._self._c;return t("div",{staticClass:"matchday-detail"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[a._m(0),a._v(" "),t("div",{staticClass:"card-tools"},[t("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:a.getBackUrl()}},[t("i",{staticClass:"fas fa-arrow-left mr-1"}),a._v("\n                    "+a._s(a.getBackText())+"\n                ")]),a._v(" "),a.canEdit?t("router-link",{staticClass:"btn btn-primary btn-sm ml-2",attrs:{to:{name:"matchdays.edit",params:{id:a.matchdayId}}}},[t("i",{staticClass:"fas fa-edit mr-1"}),a._v("\n                    Editar\n                ")]):a._e()],1)]),a._v(" "),a.loading?t("div",{staticClass:"card-body text-center"},[a._m(1),a._v(" "),t("p",{staticClass:"mt-3"},[a._v("Cargando información de la jornada...")])]):a.matchday?t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"d-flex justify-content-between align-items-start mb-3"},[t("h4",{staticClass:"mb-0"},[a._v(a._s(a.matchday.name||"Jornada ".concat(a.matchday.number)))]),a._v(" "),t("span",{class:a.getStatusClass(a.matchday.status)},[a._v("\n                            "+a._s(a.getStatusLabel(a.matchday.status))+"\n                        ")])]),a._v(" "),a.matchday.description?t("div",{staticClass:"mb-4"},[t("h6",{staticClass:"text-muted mb-2"},[a._v("Descripción")]),a._v(" "),t("p",{staticClass:"text-justify"},[a._v(a._s(a.matchday.description))])]):a._e(),a._v(" "),t("div",{staticClass:"row mb-4"},[t("div",{staticClass:"col-md-6"},[t("h6",{staticClass:"text-muted mb-2"},[a._v("Información General")]),a._v(" "),a.matchday.date?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-calendar text-primary mr-2"}),a._v(" "),t("strong",[a._v("Fecha:")]),a._v(" "+a._s(a.formatDate(a.matchday.date,!1))+"\n                            ")]):a._e(),a._v(" "),a.matchday.venue?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-map-marker-alt text-primary mr-2"}),a._v(" "),t("strong",[a._v("Ubicación:")]),a._v(" "+a._s(a.matchday.venue)+"\n                            ")]):a._e(),a._v(" "),a.matchday.organizer_club?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-users text-primary mr-2"}),a._v(" "),t("strong",[a._v("Club Organizador:")]),a._v(" "+a._s(a.matchday.organizer_club.name)+"\n                            ")]):a._e(),a._v(" "),a.matchday.championship?t("p",{staticClass:"mb-0"},[t("i",{staticClass:"fas fa-trophy text-primary mr-2"}),a._v(" "),t("strong",[a._v("Campeonato:")]),a._v(" "),t("router-link",{attrs:{to:{name:"championships.show",params:{id:a.matchday.championship.id}}}},[a._v("\n                                    "+a._s(a.matchday.championship.name)+"\n                                ")])],1):a._e()]),a._v(" "),t("div",{staticClass:"col-md-6"},[t("h6",{staticClass:"text-muted mb-2"},[a._v("Detalles de la Jornada")]),a._v(" "),a.matchday.number?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-hashtag text-success mr-2"}),a._v(" "),t("strong",[a._v("Número de Ronda:")]),a._v(" "+a._s(a.matchday.number)+"\n                            ")]):a._e(),a._v(" "),a.matchday.registration_deadline?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-clock text-warning mr-2"}),a._v(" "),t("strong",[a._v("Fecha límite inscripción:")]),a._v(" "+a._s(a.formatDate(a.matchday.registration_deadline))+"\n                            ")]):a._e(),a._v(" "),a.matchday.entry_fee?t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-dollar-sign text-success mr-2"}),a._v(" "),t("strong",[a._v("Costo de inscripción:")]),a._v(" $"+a._s(a.matchday.entry_fee)+"\n                            ")]):a._e(),a._v(" "),t("p",{staticClass:"mb-0"},[t("i",{staticClass:"fas fa-users text-info mr-2"}),a._v(" "),t("strong",[a._v("Participantes:")]),a._v(" "+a._s(a.matchday.participants_count||0)+"\n                            ")])])]),a._v(" "),t("div",{staticClass:"row text-muted small"},[t("div",{staticClass:"col-md-6"},[t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-plus-circle mr-1"}),a._v("\n                                Creada: "+a._s(a.formatDate(a.matchday.created_at))+"\n                            ")])]),a._v(" "),t("div",{staticClass:"col-md-6"},[t("p",{staticClass:"mb-1"},[t("i",{staticClass:"fas fa-edit mr-1"}),a._v("\n                                Última actualización: "+a._s(a.formatDate(a.matchday.updated_at))+"\n                            ")])])])]),a._v(" "),t("div",{staticClass:"col-md-4"},[t("div",{staticClass:"card bg-light"},[a._m(2),a._v(" "),t("div",{staticClass:"card-body"},[t("dl",{staticClass:"row small"},[t("dt",{staticClass:"col-sm-5"},[a._v("Nombre:")]),a._v(" "),t("dd",{staticClass:"col-sm-7"},[a._v(a._s(a.matchday.name||"Jornada ".concat(a.matchday.number)))]),a._v(" "),t("dt",{staticClass:"col-sm-5"},[a._v("Fecha:")]),a._v(" "),t("dd",{staticClass:"col-sm-7"},[a._v(a._s(a.formatDate(a.matchday.date,!1)||"Por definir"))]),a._v(" "),t("dt",{staticClass:"col-sm-5"},[a._v("Estado:")]),a._v(" "),t("dd",{staticClass:"col-sm-7"},[t("span",{class:a.getStatusClass(a.matchday.status)},[a._v("\n                                        "+a._s(a.getStatusLabel(a.matchday.status))+"\n                                    ")])]),a._v(" "),t("dt",{staticClass:"col-sm-5"},[a._v("Participantes:")]),a._v(" "),t("dd",{staticClass:"col-sm-7"},[a._v(a._s(a.matchday.participants_count||0))])])])]),a._v(" "),a.canEdit?t("div",{staticClass:"card mt-3"},[a._m(3),a._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-grid gap-2"},[t("router-link",{staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"matchdays.edit",params:{id:a.matchdayId}}}},[t("i",{staticClass:"fas fa-edit mr-1"}),a._v("\n                                    Editar Jornada\n                                ")]),a._v(" "),t("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"matchdays",query:{championship:a.matchday.championship_id}}}},[t("i",{staticClass:"fas fa-list mr-1"}),a._v("\n                                    Ver Todas las Jornadas\n                                ")])],1)])]):a._e()])]),a._v(" "),a.matchday.participants&&a.matchday.participants.length>0?t("div",{staticClass:"mt-5"},[t("h5",{staticClass:"mb-3"},[t("i",{staticClass:"fas fa-users mr-2"}),a._v("\n                    Participantes por Categoría ("+a._s(a.matchday.participants.length)+")\n                ")]),a._v(" "),t("div",{attrs:{id:"categoriesAccordion"}},a._l(a.categoriesData,function(r,n){return t("div",{key:"category-".concat(n),staticClass:"card mb-2"},[t("div",{staticClass:"card-header"},[t("h6",{staticClass:"mb-0"},[t("button",{staticClass:"btn btn-link btn-block text-left",staticStyle:{"text-decoration":"none"},attrs:{type:"button"},on:{click:function(t){return a.toggleCategory(n)}}},[t("i",{staticClass:"fas fa-layer-group mr-2"}),a._v("\n                                    "+a._s(r.category)+"\n                                    "),t("span",{staticClass:"badge badge-primary ml-2"},[a._v(a._s(r.pilots.length))]),a._v(" "),t("i",{staticClass:"fas fa-chevron-down float-right mt-1",style:{transform:a.isCategoryExpanded(n)?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.isCategoryExpanded(n),expression:"isCategoryExpanded(index)"}],staticClass:"card-body category-content"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm table-hover mb-0"},[a._m(4,!0),a._v(" "),t("tbody",a._l(r.pilots,function(r){var n,e,s,i,o,c,d;return t("tr",{key:r.id},[t("td",[null!==(n=r.pilot)&&void 0!==n&&n.photo?t("img",{staticClass:"rounded-circle",staticStyle:{width:"32px",height:"32px","object-fit":"cover"},attrs:{src:"/storage/"+r.pilot.photo,alt:"Foto de "+r.pilot.first_name+" "+r.pilot.last_name}}):t("div",{staticClass:"bg-secondary rounded-circle d-flex align-items-center justify-content-center",staticStyle:{width:"32px",height:"32px"}},[t("i",{staticClass:"fas fa-user text-white",staticStyle:{"font-size":"12px"}})])]),a._v(" "),t("td",[t("strong",[a._v(a._s(null===(e=r.pilot)||void 0===e?void 0:e.first_name)+" "+a._s(null===(s=r.pilot)||void 0===s?void 0:s.last_name))]),a._v(" "),t("br"),a._v(" "),t("small",{staticClass:"text-muted"},[a._v("ID: "+a._s(null===(i=r.pilot)||void 0===i?void 0:i.id))])]),a._v(" "),t("td",[null!==(o=r.pilot)&&void 0!==o&&o.club?t("span",[a._v("\n                                                    "+a._s(r.pilot.club.name)+"\n                                                ")]):t("span",{staticClass:"text-muted"},[a._v("Sin club")])]),a._v(" "),t("td",[a._v(a._s((null===(c=r.pilot)||void 0===c?void 0:c.age)||"N/A"))]),a._v(" "),t("td",[t("span",{class:a.getParticipantStatusClass(r.status)},[a._v("\n                                                    "+a._s(a.getParticipantStatusLabel(r.status))+"\n                                                ")])]),a._v(" "),t("td",[t("router-link",{staticClass:"btn btn-sm btn-outline-primary",attrs:{to:{name:"pilots.show",params:{id:null===(d=r.pilot)||void 0===d?void 0:d.id},query:{from:"matchday",matchdayId:a.matchdayId}},title:"Ver detalles del piloto"}},[t("i",{staticClass:"fas fa-eye"})])],1)])}),0)])]),a._v(" "),t("div",{staticClass:"mt-3 text-center"},[t("small",{staticClass:"text-muted"},[t("i",{staticClass:"fas fa-chart-bar mr-1"}),a._v("\n                                    "+a._s(r.stats.active)+" activos, \n                                    "+a._s(r.stats.inactive)+" inactivos, \n                                    "+a._s(r.stats.clubs)+" clubes representados\n                                ")])])])])}),0)]):a.loading?a._e():t("div",{staticClass:"mt-5"},[a._m(5)])]):t("div",{staticClass:"card-body text-center"},[t("i",{staticClass:"fas fa-exclamation-triangle fa-3x text-warning mb-3"}),a._v(" "),t("h4",{staticClass:"text-muted"},[a._v("Jornada no encontrada")]),a._v(" "),t("p",{staticClass:"text-muted"},[a._v("La jornada que buscas no existe o ha sido eliminada.")]),a._v(" "),t("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"matchdays"}}},[t("i",{staticClass:"fas fa-arrow-left mr-1"}),a._v("\n                Volver a Jornadas\n            ")])],1)])])},[function(){var a=this._self._c;return a("h3",{staticClass:"card-title"},[a("i",{staticClass:"fas fa-calendar mr-2"}),this._v("\n                Detalle de la Jornada\n            ")])},function(){var a=this._self._c;return a("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[this._v("Cargando...")])])},function(){var a=this._self._c;return a("div",{staticClass:"card-header"},[a("h6",{staticClass:"card-title mb-0"},[a("i",{staticClass:"fas fa-info-circle mr-1"}),this._v("\n                                Resumen de la Jornada\n                            ")])])},function(){var a=this._self._c;return a("div",{staticClass:"card-header"},[a("h6",{staticClass:"card-title mb-0"},[a("i",{staticClass:"fas fa-tools mr-1"}),this._v("\n                                Acciones\n                            ")])])},function(){var a=this,t=a._self._c;return t("thead",{staticClass:"thead-light"},[t("tr",[t("th",{attrs:{width:"40"}}),a._v(" "),t("th",[a._v("Piloto")]),a._v(" "),t("th",[a._v("Club")]),a._v(" "),t("th",[a._v("Edad")]),a._v(" "),t("th",[a._v("Estado")]),a._v(" "),t("th",{attrs:{width:"100"}},[a._v("Acciones")])])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"text-center py-5"},[t("i",{staticClass:"fas fa-users-slash fa-3x text-muted mb-3"}),a._v(" "),t("h5",{staticClass:"text-muted"},[a._v("No hay participantes registrados")]),a._v(" "),t("p",{staticClass:"text-muted"},[a._v("Esta jornada aún no tiene pilotos inscritos.")])])}],!1,null,"1515d2e8",null).exports},6135:(a,t,r)=>{r.d(t,{A:()=>o});var n=r(4991),e=r.n(n),s=r(6314),i=r.n(s)()(e());i.push([a.id,".matchday-detail[data-v-1515d2e8]{margin:0 auto;max-width:1200px}.text-justify[data-v-1515d2e8]{text-align:justify}.d-grid[data-v-1515d2e8]{display:grid}.gap-2[data-v-1515d2e8]{gap:.5rem}.small[data-v-1515d2e8]{font-size:.875rem}#categoriesAccordion .card[data-v-1515d2e8]{border:1px solid #dee2e6;border-radius:.375rem}#categoriesAccordion .card-header[data-v-1515d2e8]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:0}#categoriesAccordion .btn-link[data-v-1515d2e8]{background:none;border:none;color:#495057;font-weight:500;padding:1rem;text-align:left;text-decoration:none;width:100%}#categoriesAccordion .btn-link[data-v-1515d2e8]:hover{background-color:#e9ecef;color:#007bff;text-decoration:none}#categoriesAccordion .btn-link[data-v-1515d2e8]:focus{box-shadow:none}#categoriesAccordion .btn-link .fa-chevron-down[data-v-1515d2e8]{transition:transform .3s ease-in-out}#categoriesAccordion .btn-link .fa-chevron-down.rotate-180[data-v-1515d2e8]{transform:rotate(180deg)}#categoriesAccordion .category-content[data-v-1515d2e8]{animation:slideDown-1515d2e8 .3s ease-in-out;border-top:1px solid #dee2e6}@keyframes slideDown-1515d2e8{0%{max-height:0;opacity:0}to{max-height:1000px;opacity:1}}#categoriesAccordion .table th[data-v-1515d2e8]{border-top:none;color:#6c757d;font-size:.875rem;font-weight:600}#categoriesAccordion .table td[data-v-1515d2e8]{border-top:1px solid #f1f3f4;vertical-align:middle}@media (max-width:768px){.card-tools[data-v-1515d2e8]{align-items:stretch;flex-direction:column}.card-tools .btn[data-v-1515d2e8]{margin-bottom:.25rem}}","",{version:3,sources:["webpack://./resources/js/components/forms/MatchdayDetail.vue"],names:[],mappings:"AA0fA,kCAEA,aAAA,CADA,gBAEA,CAEA,+BACA,kBACA,CAEA,yBACA,YACA,CAEA,wBACA,SACA,CAEA,wBACA,iBACA,CAGA,4CACA,wBAAA,CACA,qBACA,CAEA,mDACA,wBAAA,CACA,+BAAA,CACA,SACA,CAEA,gDAOA,eAAA,CADA,WAAA,CALA,aAAA,CAOA,eAAA,CALA,YAAA,CAEA,eAAA,CAHA,oBAAA,CAEA,UAKA,CAEA,sDAEA,wBAAA,CADA,aAAA,CAEA,oBACA,CAEA,sDACA,eACA,CAEA,iEACA,oCACA,CAEA,4EACA,wBACA,CAEA,wDAEA,4CAAA,CADA,4BAEA,CAEA,8BACA,GAEA,YAAA,CADA,SAEA,CACA,GAEA,iBAAA,CADA,SAEA,CACA,CAEA,gDACA,eAAA,CAGA,aAAA,CADA,iBAAA,CADA,eAGA,CAEA,gDAEA,4BAAA,CADA,qBAEA,CAEA,yBACA,6BAEA,mBAAA,CADA,qBAEA,CAEA,kCACA,oBACA,CACA",sourcesContent:['<template>\r\n    <div class="matchday-detail">\r\n        <div class="card">\r\n            <div class="card-header">\r\n                <h3 class="card-title">\r\n                    <i class="fas fa-calendar mr-2"></i>\r\n                    Detalle de la Jornada\r\n                </h3>\r\n                <div class="card-tools">\r\n                    <router-link :to="getBackUrl()" class="btn btn-outline-secondary btn-sm">\r\n                        <i class="fas fa-arrow-left mr-1"></i>\r\n                        {{ getBackText() }}\r\n                    </router-link>\r\n                    <router-link \r\n                        v-if="canEdit" \r\n                        :to="{ name: \'matchdays.edit\', params: { id: matchdayId } }" \r\n                        class="btn btn-primary btn-sm ml-2"\r\n                    >\r\n                        <i class="fas fa-edit mr-1"></i>\r\n                        Editar\r\n                    </router-link>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if="loading" class="card-body text-center">\r\n                <div class="spinner-border text-primary" role="status">\r\n                    <span class="sr-only">Cargando...</span>\r\n                </div>\r\n                <p class="mt-3">Cargando información de la jornada...</p>\r\n            </div>\r\n\r\n            <div v-else-if="matchday" class="card-body">\r\n                <div class="row">\r\n                    \x3c!-- Información principal --\x3e\r\n                    <div class="col-md-8">\r\n                        <div class="d-flex justify-content-between align-items-start mb-3">\r\n                            <h4 class="mb-0">{{ matchday.name || `Jornada ${matchday.number}` }}</h4>\r\n                            <span :class="getStatusClass(matchday.status)">\r\n                                {{ getStatusLabel(matchday.status) }}\r\n                            </span>\r\n                        </div>\r\n                        \r\n                        <div v-if="matchday.description" class="mb-4">\r\n                            <h6 class="text-muted mb-2">Descripción</h6>\r\n                            <p class="text-justify">{{ matchday.description }}</p>\r\n                        </div>\r\n\r\n                        <div class="row mb-4">\r\n                            <div class="col-md-6">\r\n                                <h6 class="text-muted mb-2">Información General</h6>\r\n                                <p v-if="matchday.date" class="mb-1">\r\n                                    <i class="fas fa-calendar text-primary mr-2"></i>\r\n                                    <strong>Fecha:</strong> {{ formatDate(matchday.date, false) }}\r\n                                </p>\r\n                                <p v-if="matchday.venue" class="mb-1">\r\n                                    <i class="fas fa-map-marker-alt text-primary mr-2"></i>\r\n                                    <strong>Ubicación:</strong> {{ matchday.venue }}\r\n                                </p>\r\n                                <p v-if="matchday.organizer_club" class="mb-1">\r\n                                    <i class="fas fa-users text-primary mr-2"></i>\r\n                                    <strong>Club Organizador:</strong> {{ matchday.organizer_club.name }}\r\n                                </p>\r\n                                <p v-if="matchday.championship" class="mb-0">\r\n                                    <i class="fas fa-trophy text-primary mr-2"></i>\r\n                                    <strong>Campeonato:</strong> \r\n                                    <router-link :to="{ name: \'championships.show\', params: { id: matchday.championship.id } }">\r\n                                        {{ matchday.championship.name }}\r\n                                    </router-link>\r\n                                </p>\r\n                            </div>\r\n                            <div class="col-md-6">\r\n                                <h6 class="text-muted mb-2">Detalles de la Jornada</h6>\r\n                                <p v-if="matchday.number" class="mb-1">\r\n                                    <i class="fas fa-hashtag text-success mr-2"></i>\r\n                                    <strong>Número de Ronda:</strong> {{ matchday.number }}\r\n                                </p>\r\n                                <p v-if="matchday.registration_deadline" class="mb-1">\r\n                                    <i class="fas fa-clock text-warning mr-2"></i>\r\n                                    <strong>Fecha límite inscripción:</strong> {{ formatDate(matchday.registration_deadline) }}\r\n                                </p>\r\n                                <p v-if="matchday.entry_fee" class="mb-1">\r\n                                    <i class="fas fa-dollar-sign text-success mr-2"></i>\r\n                                    <strong>Costo de inscripción:</strong> ${{ matchday.entry_fee }}\r\n                                </p>\r\n                                <p class="mb-0">\r\n                                    <i class="fas fa-users text-info mr-2"></i>\r\n                                    <strong>Participantes:</strong> {{ matchday.participants_count || 0 }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \x3c!-- Fechas de registro --\x3e\r\n                        <div class="row text-muted small">\r\n                            <div class="col-md-6">\r\n                                <p class="mb-1">\r\n                                    <i class="fas fa-plus-circle mr-1"></i>\r\n                                    Creada: {{ formatDate(matchday.created_at) }}\r\n                                </p>\r\n                            </div>\r\n                            <div class="col-md-6">\r\n                                <p class="mb-1">\r\n                                    <i class="fas fa-edit mr-1"></i>\r\n                                    Última actualización: {{ formatDate(matchday.updated_at) }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    \x3c!-- Panel lateral --\x3e\r\n                    <div class="col-md-4">\r\n                        <div class="card bg-light">\r\n                            <div class="card-header">\r\n                                <h6 class="card-title mb-0">\r\n                                    <i class="fas fa-info-circle mr-1"></i>\r\n                                    Resumen de la Jornada\r\n                                </h6>\r\n                            </div>\r\n                            <div class="card-body">\r\n                                <dl class="row small">\r\n                                    <dt class="col-sm-5">Nombre:</dt>\r\n                                    <dd class="col-sm-7">{{ matchday.name || `Jornada ${matchday.number}` }}</dd>\r\n                                    \r\n                                    <dt class="col-sm-5">Fecha:</dt>\r\n                                    <dd class="col-sm-7">{{ formatDate(matchday.date, false) || \'Por definir\' }}</dd>\r\n                                    \r\n                                    <dt class="col-sm-5">Estado:</dt>\r\n                                    <dd class="col-sm-7">\r\n                                        <span :class="getStatusClass(matchday.status)">\r\n                                            {{ getStatusLabel(matchday.status) }}\r\n                                        </span>\r\n                                    </dd>\r\n                                    \r\n                                    <dt class="col-sm-5">Participantes:</dt>\r\n                                    <dd class="col-sm-7">{{ matchday.participants_count || 0 }}</dd>\r\n                                </dl>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \x3c!-- Acciones rápidas --\x3e\r\n                        <div v-if="canEdit" class="card mt-3">\r\n                            <div class="card-header">\r\n                                <h6 class="card-title mb-0">\r\n                                    <i class="fas fa-tools mr-1"></i>\r\n                                    Acciones\r\n                                </h6>\r\n                            </div>\r\n                            <div class="card-body">\r\n                                <div class="d-grid gap-2">\r\n                                    <router-link \r\n                                        :to="{ name: \'matchdays.edit\', params: { id: matchdayId } }" \r\n                                        class="btn btn-primary btn-sm"\r\n                                    >\r\n                                        <i class="fas fa-edit mr-1"></i>\r\n                                        Editar Jornada\r\n                                    </router-link>\r\n                                    <router-link \r\n                                        :to="{ name: \'matchdays\', query: { championship: matchday.championship_id } }" \r\n                                        class="btn btn-outline-primary btn-sm"\r\n                                    >\r\n                                        <i class="fas fa-list mr-1"></i>\r\n                                        Ver Todas las Jornadas\r\n                                    </router-link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                \x3c!-- Lista de participantes agrupados por categoría --\x3e\r\n                <div v-if="matchday.participants && matchday.participants.length > 0" class="mt-5">\r\n                    <h5 class="mb-3">\r\n                        <i class="fas fa-users mr-2"></i>\r\n                        Participantes por Categoría ({{ matchday.participants.length }})\r\n                    </h5>\r\n                    \r\n                    \x3c!-- Acordeón de categorías --\x3e\r\n                    <div id="categoriesAccordion">\r\n                        <div v-for="(categoryGroup, index) in categoriesData" :key="`category-${index}`" class="card mb-2">\r\n                            <div class="card-header">\r\n                                <h6 class="mb-0">\r\n                                    <button \r\n                                        class="btn btn-link btn-block text-left"\r\n                                        type="button" \r\n                                        @click="toggleCategory(index)"\r\n                                        style="text-decoration: none;"\r\n                                    >\r\n                                        <i class="fas fa-layer-group mr-2"></i>\r\n                                        {{ categoryGroup.category }}\r\n                                        <span class="badge badge-primary ml-2">{{ categoryGroup.pilots.length }}</span>\r\n                                        <i class="fas fa-chevron-down float-right mt-1" \r\n                                           :style="{ transform: isCategoryExpanded(index) ? \'rotate(180deg)\' : \'rotate(0deg)\', transition: \'transform 0.3s\' }"></i>\r\n                                    </button>\r\n                                </h6>\r\n                            </div>\r\n                            \r\n                            <div v-show="isCategoryExpanded(index)" class="card-body category-content">\r\n                                <div class="table-responsive">\r\n                                    <table class="table table-sm table-hover mb-0">\r\n                                        <thead class="thead-light">\r\n                                            <tr>\r\n                                                <th width="40"></th>\r\n                                                <th>Piloto</th>\r\n                                                <th>Club</th>\r\n                                                <th>Edad</th>\r\n                                                <th>Estado</th>\r\n                                                <th width="100">Acciones</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr v-for="participant in categoryGroup.pilots" :key="participant.id">\r\n                                                <td>\r\n                                                    <img \r\n                                                        v-if="participant.pilot?.photo" \r\n                                                        :src="\'/storage/\' + participant.pilot.photo" \r\n                                                        :alt="\'Foto de \' + participant.pilot.first_name + \' \' + participant.pilot.last_name"\r\n                                                        class="rounded-circle" \r\n                                                        style="width: 32px; height: 32px; object-fit: cover;"\r\n                                                    >\r\n                                                    <div \r\n                                                        v-else\r\n                                                        class="bg-secondary rounded-circle d-flex align-items-center justify-content-center" \r\n                                                        style="width: 32px; height: 32px;"\r\n                                                    >\r\n                                                        <i class="fas fa-user text-white" style="font-size: 12px;"></i>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <strong>{{ participant.pilot?.first_name }} {{ participant.pilot?.last_name }}</strong>\r\n                                                    <br>\r\n                                                    <small class="text-muted">ID: {{ participant.pilot?.id }}</small>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span v-if="participant.pilot?.club">\r\n                                                        {{ participant.pilot.club.name }}\r\n                                                    </span>\r\n                                                    <span v-else class="text-muted">Sin club</span>\r\n                                                </td>\r\n                                                <td>{{ participant.pilot?.age || \'N/A\' }}</td>\r\n                                                <td>\r\n                                                    <span :class="getParticipantStatusClass(participant.status)">\r\n                                                        {{ getParticipantStatusLabel(participant.status) }}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <router-link \r\n                                                        :to="{ \r\n                                                            name: \'pilots.show\', \r\n                                                            params: { id: participant.pilot?.id },\r\n                                                            query: {\r\n                                                                from: \'matchday\',\r\n                                                                matchdayId: matchdayId\r\n                                                            }\r\n                                                        }" \r\n                                                        class="btn btn-sm btn-outline-primary"\r\n                                                        title="Ver detalles del piloto"\r\n                                                    >\r\n                                                        <i class="fas fa-eye"></i>\r\n                                                    </router-link>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                                \r\n                                \x3c!-- Estadísticas rápidas de la categoría --\x3e\r\n                                <div class="mt-3 text-center">\r\n                                    <small class="text-muted">\r\n                                        <i class="fas fa-chart-bar mr-1"></i>\r\n                                        {{ categoryGroup.stats.active }} activos, \r\n                                        {{ categoryGroup.stats.inactive }} inactivos, \r\n                                        {{ categoryGroup.stats.clubs }} clubes representados\r\n                                    </small>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                \x3c!-- Mensaje cuando no hay participantes --\x3e\r\n                <div v-else-if="!loading" class="mt-5">\r\n                    <div class="text-center py-5">\r\n                        <i class="fas fa-users-slash fa-3x text-muted mb-3"></i>\r\n                        <h5 class="text-muted">No hay participantes registrados</h5>\r\n                        <p class="text-muted">Esta jornada aún no tiene pilotos inscritos.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-else class="card-body text-center">\r\n                <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>\r\n                <h4 class="text-muted">Jornada no encontrada</h4>\r\n                <p class="text-muted">La jornada que buscas no existe o ha sido eliminada.</p>\r\n                <router-link :to="{ name: \'matchdays\' }" class="btn btn-primary">\r\n                    <i class="fas fa-arrow-left mr-1"></i>\r\n                    Volver a Jornadas\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \'MatchdayDetail\',\r\n    data() {\r\n        return {\r\n            matchday: null,\r\n            loading: false,\r\n            categoriesData: [], // Nueva propiedad para manejar el estado del acordeón\r\n            expandedCategories: {} // Objeto para controlar el estado expandido de cada categoría\r\n        };\r\n    },\r\n    computed: {\r\n        matchdayId() {\r\n            return this.$route.params.id;\r\n        },\r\n        canEdit() {\r\n            return window.Laravel?.user?.authenticated || false;\r\n        },\r\n        // Detectar desde dónde viene el usuario\r\n        fromChampionship() {\r\n            return this.$route.query.from === \'championship\' && this.$route.query.championshipId;\r\n        },\r\n        fromChampionshipId() {\r\n            return this.$route.query.championshipId;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.loadMatchday();\r\n    },\r\n    methods: {\r\n        async loadMatchday() {\r\n            this.loading = true;\r\n            try {\r\n                // Primero verificar si hay datos iniciales del servidor\r\n                if (window.Laravel && window.Laravel.initialData && window.Laravel.initialData.page === \'matchday-detail\') {\r\n                    this.matchday = window.Laravel.initialData.matchday;\r\n                } else {\r\n                    // Si no hay datos iniciales, cargar desde API\r\n                    const response = await fetch(`/api/matchdays/${this.matchdayId}`);\r\n                    if (!response.ok) {\r\n                        throw new Error(\'Jornada no encontrada\');\r\n                    }\r\n                    const data = await response.json();\r\n                    this.matchday = data.success ? data.data : data;\r\n                }                } catch (error) {\r\n                console.error(\'Error loading matchday:\', error);\r\n                this.matchday = null;\r\n            } finally {\r\n                this.loading = false;\r\n                // Procesar categorías después de cargar\r\n                this.processCategories();\r\n            }\r\n        },\r\n\r\n        processCategories() {\r\n            if (!this.matchday || !this.matchday.participants) {\r\n                this.categoriesData = [];\r\n                this.expandedCategories = {};\r\n                return;\r\n            }\r\n            \r\n            // Agrupar por categoría\r\n            const grouped = {};\r\n            \r\n            this.matchday.participants.forEach(participant => {\r\n                const categoryName = participant.pilot?.category?.name || \'Sin categoría\';\r\n                \r\n                if (!grouped[categoryName]) {\r\n                    grouped[categoryName] = {\r\n                        category: categoryName,\r\n                        pilots: [],\r\n                        stats: {\r\n                            active: 0,\r\n                            inactive: 0,\r\n                            clubs: new Set()\r\n                        }\r\n                    };\r\n                }\r\n                \r\n                grouped[categoryName].pilots.push(participant);\r\n                \r\n                // Calcular estadísticas\r\n                if (participant.status === \'active\' || participant.status === \'confirmed\') {\r\n                    grouped[categoryName].stats.active++;\r\n                } else {\r\n                    grouped[categoryName].stats.inactive++;\r\n                }\r\n                \r\n                if (participant.pilot?.club?.name) {\r\n                    grouped[categoryName].stats.clubs.add(participant.pilot.club.name);\r\n                }\r\n            });\r\n            \r\n            // Convertir el Set de clubes a número\r\n            Object.values(grouped).forEach(group => {\r\n                group.stats.clubs = group.stats.clubs.size;\r\n            });\r\n            \r\n            // Convertir a array y ordenar por nombre de categoría\r\n            const result = Object.values(grouped).sort((a, b) => {\r\n                // \'Sin categoría\' siempre al final\r\n                if (a.category === \'Sin categoría\') return 1;\r\n                if (b.category === \'Sin categoría\') return -1;\r\n                return a.category.localeCompare(b.category);\r\n            });\r\n            \r\n            this.categoriesData = result;\r\n            \r\n            // Inicializar estado expandido (primera categoría expandida por defecto)\r\n            const expandedState = {};\r\n            result.forEach((category, index) => {\r\n                expandedState[index] = index === 0; // Solo la primera expandida\r\n            });\r\n            this.expandedCategories = expandedState;\r\n        },\r\n\r\n        toggleCategory(index) {\r\n            // Usar Vue.set para asegurar reactividad\r\n            this.$set(this.expandedCategories, index, !this.expandedCategories[index]);\r\n        },\r\n\r\n        isCategoryExpanded(index) {\r\n            return this.expandedCategories[index] || false;\r\n        },\r\n\r\n        // Métodos para navegación inteligente\r\n        getBackUrl() {\r\n            if (this.fromChampionship) {\r\n                return `/campeonatos/${this.fromChampionshipId}`;\r\n            }\r\n            return \'/jornadas\';\r\n        },\r\n        \r\n        getBackText() {\r\n            if (this.fromChampionship) {\r\n                return \'Campeonato\';\r\n            }\r\n            return \'Jornadas\';\r\n        },\r\n\r\n        getStatusClass(status) {\r\n            const classes = {\r\n                \'active\': \'badge badge-success\',\r\n                \'completed\': \'badge badge-primary\',\r\n                \'cancelled\': \'badge badge-danger\',\r\n                \'postponed\': \'badge badge-warning\',\r\n                \'draft\': \'badge badge-secondary\'\r\n            };\r\n            return classes[status] || \'badge badge-secondary\';\r\n        },\r\n\r\n        getStatusLabel(status) {\r\n            const labels = {\r\n                \'active\': \'Activa\',\r\n                \'completed\': \'Completada\',\r\n                \'cancelled\': \'Cancelada\',\r\n                \'postponed\': \'Pospuesta\',\r\n                \'draft\': \'Borrador\'\r\n            };\r\n            return labels[status] || \'Desconocido\';\r\n        },\r\n\r\n        getParticipantStatusClass(status) {\r\n            const classes = {\r\n                \'active\': \'badge badge-success\',\r\n                \'inactive\': \'badge badge-secondary\',\r\n                \'disqualified\': \'badge badge-danger\'\r\n            };\r\n            return classes[status] || \'badge badge-secondary\';\r\n        },\r\n\r\n        getParticipantStatusLabel(status) {\r\n            const labels = {\r\n                \'active\': \'Activo\',\r\n                \'inactive\': \'Inactivo\',\r\n                \'disqualified\': \'Descalificado\'\r\n            };\r\n            return labels[status] || \'Desconocido\';\r\n        },\r\n\r\n        formatDate(dateString, includeTime = true) {\r\n            if (!dateString) return \'No disponible\';\r\n            try {\r\n                const date = new Date(dateString);\r\n                const options = {\r\n                    year: \'numeric\',\r\n                    month: \'long\',\r\n                    day: \'numeric\'\r\n                };\r\n                \r\n                if (includeTime) {\r\n                    options.hour = \'2-digit\';\r\n                    options.minute = \'2-digit\';\r\n                }\r\n                \r\n                return date.toLocaleDateString(\'es-ES\', options);\r\n            } catch (error) {\r\n                return \'Fecha inválida\';\r\n            }\r\n        }\r\n    }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.matchday-detail {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.text-justify {\r\n    text-align: justify;\r\n}\r\n\r\n.d-grid {\r\n    display: grid;\r\n}\r\n\r\n.gap-2 {\r\n    gap: 0.5rem;\r\n}\r\n\r\n.small {\r\n    font-size: 0.875rem;\r\n}\r\n\r\n/* Estilos para el acordeón de categorías */\r\n#categoriesAccordion .card {\r\n    border: 1px solid #dee2e6;\r\n    border-radius: 0.375rem;\r\n}\r\n\r\n#categoriesAccordion .card-header {\r\n    background-color: #f8f9fa;\r\n    border-bottom: 1px solid #dee2e6;\r\n    padding: 0;\r\n}\r\n\r\n#categoriesAccordion .btn-link {\r\n    color: #495057;\r\n    text-decoration: none;\r\n    padding: 1rem;\r\n    width: 100%;\r\n    text-align: left;\r\n    border: none;\r\n    background: none;\r\n    font-weight: 500;\r\n}\r\n\r\n#categoriesAccordion .btn-link:hover {\r\n    color: #007bff;\r\n    background-color: #e9ecef;\r\n    text-decoration: none;\r\n}\r\n\r\n#categoriesAccordion .btn-link:focus {\r\n    box-shadow: none;\r\n}\r\n\r\n#categoriesAccordion .btn-link .fa-chevron-down {\r\n    transition: transform 0.3s ease-in-out;\r\n}\r\n\r\n#categoriesAccordion .btn-link .fa-chevron-down.rotate-180 {\r\n    transform: rotate(180deg);\r\n}\r\n\r\n#categoriesAccordion .category-content {\r\n    border-top: 1px solid #dee2e6;\r\n    animation: slideDown 0.3s ease-in-out;\r\n}\r\n\r\n@keyframes slideDown {\r\n    from {\r\n        opacity: 0;\r\n        max-height: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n        max-height: 1000px;\r\n    }\r\n}\r\n\r\n#categoriesAccordion .table th {\r\n    border-top: none;\r\n    font-weight: 600;\r\n    font-size: 0.875rem;\r\n    color: #6c757d;\r\n}\r\n\r\n#categoriesAccordion .table td {\r\n    vertical-align: middle;\r\n    border-top: 1px solid #f1f3f4;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .card-tools {\r\n        flex-direction: column;\r\n        align-items: stretch;\r\n    }\r\n    \r\n    .card-tools .btn {\r\n        margin-bottom: 0.25rem;\r\n    }\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const o=i}}]);
//# sourceMappingURL=224.js.map